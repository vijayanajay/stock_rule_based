[2025-08-07 23:28:51] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      WARNING  Insufficient data for RELIANCE, skipping        
                      WARNING  Insufficient data for TCS, skipping             
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
[2025-08-07 23:28:52] INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 0.75s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:52] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      WARNING  Insufficient data for RELIANCE, skipping        
                      WARNING  Insufficient data for TCS, skipping             
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      ERROR    Failed to generate report: Permission denied    
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\report
                               er.py", line 446, in generate_daily_report      
                                   report_file.write_text(report_content,      
                               encoding="utf-8")                               
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                               OSError: Permission denied                      
(WARN) Report generation failed
                      INFO     full_backtest completed in 0.03s                
                      ERROR    Critical error: Could not save log file to      
                               run_log.txt. Reason: Permission denied          
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\cli.py
                               ", line 298, in _save_command_log               
                                   log_path.write_text(console.export_text(clea
                               r=False), encoding="utf-8")                     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\report
                               er.py", line 446, in generate_daily_report      
                                   report_file.write_text(report_content,      
                               encoding="utf-8")                               
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                               OSError: Permission denied                      
Critical error: Could not save log file to run_log.txt. Reason: Permission 
denied
                      INFO     Database connection closed.                     
[2025-08-07 23:28:52] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: [Errno 2] No such file or directory: 
'C:\\Users\\user\\AppData\\Local\\Temp\\tmpjy39u9tw\\nonexistent.yaml'
[2025-08-07 23:28:52] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      WARNING  Insufficient data for RELIANCE, skipping        
                      WARNING  Insufficient data for TCS, skipping             
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 0.02s                

Performance Summary:
Total Duration: 0.02s
Slowest Function: full_backtest
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:52] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      WARNING  Insufficient data for RELIANCE, skipping        
                      WARNING  Insufficient data for TCS, skipping             
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 0.02s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:52] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['^NSEI', 1, 0])                            
                      DEBUG      Entering history()                            
                      DEBUG    ^NSEI: Yahoo GET parameters: {'period1':        
                               '2024-08-07 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    ^NSEI: yfinance received OHLC data: 2024-08-07  
                               03:45:00 -> 2025-08-06 03:45:00                 
                      DEBUG    ^NSEI: OHLC after cleaning: 2024-08-07          
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    ^NSEI: OHLC after combining events: 2024-08-07  
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG    ^NSEI: yfinance returning OHLC: 2024-08-07      
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\INDEX_NSEI.csv        
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 0.08s                

Performance Summary:
Total Duration: 0.08s
Slowest Function: full_backtest
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:52] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      INFO     full_backtest completed in 0.00s                
An unexpected error occurred during run pipeline: Report error
┌───────────────────── Traceback (most recent call last) ─────────────────────┐
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:457 in run                  │
│                                                                             │
│   454 │   │   │   │   │   freeze_date=app_config.freeze_date,  # This is no │
│   455 │   │   │   │   )                                                     │
│   456 │   │   │                                                             │
│ > 457 │   │   │   all_results = _execute_backtesting_workflow(app_config, r │
│   458 │   │   │   console.print("[4/4] Analysis complete. Results summary:" │
│   459 │   │   │   _process_and_save_results(db_connection, all_results, app │
│   460                                                                       │
│                                                                             │
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:343 in                      │
│ _execute_backtesting_workflow                                               │
│                                                                             │
│   340 │   console.print("[3/4] Analyzing strategies for each ticker...")    │
│   341 │   symbols = data.load_universe(app_config.universe_path)            │
│   342 │   threshold = min_trades if min_trades is not None else getattr(app │
│ > 343 │   return _run_backtests(app_config, rules_config, symbols, freeze_d │
│   344                                                                       │
│   345                                                                       │
│   346 def _process_and_save_results(                                        │
│                                                                             │
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:155 in _run_backtests       │
│                                                                             │
│   152 │   # Use provided min_trades_threshold, or fall back to config, or d │
│   153 │   threshold = min_trades_threshold if min_trades_threshold is not N │
│   154 │                                                                     │
│ > 155 │   bt = backtester.Backtester(                                       │
│   156 │   │   hold_period=getattr(app_config, "hold_period", 20),           │
│   157 │   │   min_trades_threshold=threshold,                               │
│   158 │   │   initial_capital=getattr(app_config, "portfolio_initial_capita │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1139 in __call__                                                            │
│                                                                             │
│   1136 │   │   # in the signature                                           │
│   1137 │   │   self._mock_check_sig(*args, **kwargs)                        │
│   1138 │   │   self._increment_mock_call(*args, **kwargs)                   │
│ > 1139 │   │   return self._mock_call(*args, **kwargs)                      │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1143 in _mock_call                                                          │
│                                                                             │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│ > 1143 │   │   return self._execute_mock_call(*args, **kwargs)              │
│   1144 │                                                                    │
│   1145 │   def _increment_mock_call(self, /, *args, **kwargs):              │
│   1146 │   │   self.called = True                                           │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1198 in _execute_mock_call                                                  │
│                                                                             │
│   1195 │   │   effect = self.side_effect                                    │
│   1196 │   │   if effect is not None:                                       │
│   1197 │   │   │   if _is_exception(effect):                                │
│ > 1198 │   │   │   │   raise effect                                         │
│   1199 │   │   │   elif not _callable(effect):                              │
│   1200 │   │   │   │   result = next(effect)                                │
│   1201 │   │   │   │   if _is_exception(result):                            │
└─────────────────────────────────────────────────────────────────────────────┘
Exception: Report error
[2025-08-07 23:28:53] INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:53] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md

Performance Summary:
Total Duration: 1.23s
Slowest Function: test_function
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:54] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Skipping data refresh (freeze mode).
[3/4] Analyzing strategies for each ticker...
                      WARNING  Insufficient data for RELIANCE, skipping        
                      WARNING  Insufficient data for TCS, skipping             
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      WARNING  Could not load NIFTY data for benchmark: Cached 
                               data not found for ^NSEI (freeze mode)          
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-01-01.md 
* Report generated: reports\signals_2025-01-01.md
                      INFO     full_backtest completed in 0.02s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:54] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
Error: Invalid isoformat string for freeze_date: 'invalid-date'
[2025-08-07 23:28:54] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: [Errno 2] No such file or directory: 'config.yaml'
[2025-08-07 23:28:54] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: Rules file not found: 
C:\Users\user\AppData\Local\Temp\tmph0wvp90x\config\missing_rules.yaml
[2025-08-07 23:28:54] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: Config file not found
[2025-08-07 23:28:54] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: Invalid config format
[2025-08-07 23:28:55] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 0.07s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:55] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Refreshing 5 symbols                            
[2025-08-07 23:28:59] INFO     Successfully refreshed 5/5 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                      Top Strategies by Edge Score                       
┌──────────┬─────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack          │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼─────────────────────┼────────────┼───────┼────────┼────────┤
│ RELIANCE │ sma_10_20_crossover │      0.750 │ 65.0% │   1.20 │     15 │
└──────────┴─────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 1 valid strategies across 1 symbols.
[5/5] Saving results...
                      INFO     Saving 1 strategies to the database.            
                      INFO     Successfully saved 1 strategies                 
                      INFO     Saved 1 strategies to the database.             
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 1 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Added new OPEN position for RELIANCE at 0.0.    
                      INFO     Added 1 new positions                           
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 3.90s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:28:59] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
An unexpected error occurred during run pipeline: Database error
                      INFO     Log file saved to run_log.txt                   
[2025-08-07 23:28:59] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
An unexpected error occurred during run pipeline: Unexpected database failure
                      INFO     Log file saved to run_log.txt                   
[2025-08-07 23:28:59] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Refreshing 5 symbols                            
[2025-08-07 23:29:02] INFO     Successfully refreshed 5/5 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                 Top Strategies by Edge Score                 
┌────────┬────────────┬────────────┬───────┬────────┬────────┐
│ Symbol │ Rule Stack │ Edge Score │ Win % │ Sharpe │ Trades │
├────────┼────────────┼────────────┼───────┼────────┼────────┤
└────────┴────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 0 valid strategies across 0 symbols.
[5/5] Saving results...
⚠️  Database error: Save failed
                      ERROR    Persistence error: Save failed                  
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\cli.py
                               ", line 250, in _save_results                   
                                   success = persistence.save_strategies_batch(
                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                               Exception: Save failed                          
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 0 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 2.62s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:02] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     All symbols are fresh, no refresh needed        
                      INFO     Successfully refreshed 0/0 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                 Top Strategies by Edge Score                 
┌────────┬────────────┬────────────┬───────┬────────┬────────┐
│ Symbol │ Rule Stack │ Edge Score │ Win % │ Sharpe │ Trades │
├────────┼────────────┼────────────┼───────┼────────┼────────┤
└────────┴────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 0 valid strategies across 0 symbols.
[5/5] Saving results...
⚠️  Failed to save results to database.
                      WARNING  Persistence failed but continuing execution.    
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 0 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 0.05s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:02] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-08-07 23:29:02] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-08-07 23:29:02] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-08-07 23:29:03] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
✅ Strategy performance analysis saved to: 
C:\Users\user\AppData\Local\Temp\tmpz6nio7c3\custom_output.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-08-07 23:29:03] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:03] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:03] INFO     === KISS Signal CLI Run Started ===             
[2025-08-07 23:29:04] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
                      ERROR    Failed to read strategies from database: no such
                               column: symbol                                  
No historical strategies found to analyze.
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-08-07 23:29:04] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
An unexpected error occurred during analysis: Analysis failed
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-08-07 23:29:04] INFO     === KISS Signal CLI Run Started ===             
✅ Cleared: 5 strategies
✅ Preserved: 10 historical strategies
Recalculating strategies...
✅ New strategies found: 1
                      INFO     Log file saved to clear_and_recalculate_log.txt 
[2025-08-07 23:29:04] INFO     === KISS Signal CLI Run Started ===             
An unexpected error occurred: Database connection failed
                      INFO     Log file saved to clear_and_recalculate_log.txt 
[2025-08-07 23:29:04] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: Invalid YAML in config file: 
C:\Users\user\AppData\Local\Temp\tmpzr6mpdbd\invalid_config.yaml
[2025-08-07 23:29:04] INFO     === KISS Signal CLI Run Started ===             
                      INFO     Starting migration of strategies table at       
                               data\kiss_signal.db                             
                      INFO     Current database version: 0                     
                      ERROR    Migration failed: no such table: strategies     
                      ERROR    Failed to connect to database at                
                               data\kiss_signal.db: no such table: strategies  
An unexpected error occurred: no such table: strategies
                      INFO     Log file saved to clear_and_recalculate_log.txt 
[2025-08-07 23:29:05] INFO     === KISS Signal CLI Run Started ===             
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:05] INFO     === KISS Signal CLI Run Started ===             
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:05] INFO     === KISS Signal CLI Run Started ===             
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:05] INFO     === KISS Signal CLI Run Started ===             
[2025-08-07 23:29:06] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Refreshing 5 symbols                            
[2025-08-07 23:29:08] INFO     Successfully refreshed 5/5 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                  Top Strategies by Edge Score                  
┌──────────┬────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼────────────┼────────────┼───────┼────────┼────────┤
│ TCS      │ test       │      0.800 │ 70.0% │   1.50 │     10 │
│ RELIANCE │ test       │      0.750 │ 65.0% │   1.20 │      3 │
└──────────┴────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 2 valid strategies across 2 symbols.
[5/5] Saving results...
[2025-08-07 23:29:09] INFO     Saving 2 strategies to the database.            
                      INFO     Successfully saved 2 strategies                 
                      INFO     Saved 2 strategies to the database.             
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 2 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Added new OPEN position for RELIANCE at 0.0.    
                      INFO     Added new OPEN position for TCS at 0.0.         
                      INFO     Added 2 new positions                           
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 2.87s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:09] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: Invalid configuration in config.yaml: 9 validation
errors for Config
universe_path
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
historical_data_years
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
cache_dir
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
hold_period
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
min_trades_threshold
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
edge_score_weights
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
database_path
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reports_output_dir
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
edge_score_threshold
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
[2025-08-07 23:29:09] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: Invalid configuration in config.yaml: 9 validation
errors for Config
universe_path
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
historical_data_years
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
cache_dir
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
hold_period
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
min_trades_threshold
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
edge_score_weights
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
database_path
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reports_output_dir
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
edge_score_threshold
  Field required 
    For further information visit https://errors.pydantic.dev/2.11/v/missing
[2025-08-07 23:29:09] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at test.db                    
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at test.db        
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
                      INFO     Loaded 1 symbols from universe                  
                      INFO     Refreshing 1 symbols                            
                      DEBUG    Fetching RELIANCE (1/1)                         
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['RELIANCE.NS', 1, 0])                      
                      DEBUG      Entering history()                            
                      DEBUG    RELIANCE.NS: Yahoo GET parameters: {'period1':  
                               '2024-08-07 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG       Entering get()                               
                      DEBUG        Entering _make_request()                    
                      DEBUG    url=https://query2.finance.yahoo.com/v8/finance/
                               chart/RELIANCE.NS                               
                      DEBUG    params=frozendict.frozendict({'period1':        
                               1722969000, 'period2': 1754505000, 'interval':  
                               '1d', 'includePrePost': False, 'events':        
                               'div,splits,capitalGains'})                     
                      DEBUG         Entering _get_cookie_and_crumb()           
                      DEBUG    cookie_mode = 'basic'                           
                      DEBUG          Entering _get_cookie_and_crumb_basic()    
                      DEBUG           Entering _get_cookie_basic()             
                      DEBUG    reusing cookie                                  
                      DEBUG           Exiting _get_cookie_basic()              
                      DEBUG           Entering _get_crumb_basic()              
                      DEBUG    reusing crumb                                   
                      DEBUG           Exiting _get_crumb_basic()               
                      DEBUG          Exiting _get_cookie_and_crumb_basic()     
                      DEBUG         Exiting _get_cookie_and_crumb()            
                      DEBUG    response code=200                               
                      DEBUG        Exiting _make_request()                     
                      DEBUG       Exiting get()                                
                      DEBUG    RELIANCE.NS: yfinance received OHLC data:       
                               2024-08-07 03:45:00 -> 2025-08-06 03:45:00      
                      DEBUG    RELIANCE.NS: OHLC after cleaning: 2024-08-07    
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    RELIANCE.NS: OHLC after combining events:       
                               2024-08-07 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG    RELIANCE.NS: yfinance returning OHLC: 2024-08-07
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to cache\RELIANCE.NS.csv            
                      INFO     Successfully refreshed 1/1 symbols              
                      INFO     full_backtest completed in 0.40s                
An unexpected error occurred during run pipeline: Generic backtest error
┌───────────────────── Traceback (most recent call last) ─────────────────────┐
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:457 in run                  │
│                                                                             │
│   454 │   │   │   │   │   freeze_date=app_config.freeze_date,  # This is no │
│   455 │   │   │   │   )                                                     │
│   456 │   │   │                                                             │
│ > 457 │   │   │   all_results = _execute_backtesting_workflow(app_config, r │
│   458 │   │   │   console.print("[4/4] Analysis complete. Results summary:" │
│   459 │   │   │   _process_and_save_results(db_connection, all_results, app │
│   460                                                                       │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1139 in __call__                                                            │
│                                                                             │
│   1136 │   │   # in the signature                                           │
│   1137 │   │   self._mock_check_sig(*args, **kwargs)                        │
│   1138 │   │   self._increment_mock_call(*args, **kwargs)                   │
│ > 1139 │   │   return self._mock_call(*args, **kwargs)                      │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1143 in _mock_call                                                          │
│                                                                             │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│ > 1143 │   │   return self._execute_mock_call(*args, **kwargs)              │
│   1144 │                                                                    │
│   1145 │   def _increment_mock_call(self, /, *args, **kwargs):              │
│   1146 │   │   self.called = True                                           │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1198 in _execute_mock_call                                                  │
│                                                                             │
│   1195 │   │   effect = self.side_effect                                    │
│   1196 │   │   if effect is not None:                                       │
│   1197 │   │   │   if _is_exception(effect):                                │
│ > 1198 │   │   │   │   raise effect                                         │
│   1199 │   │   │   elif not _callable(effect):                              │
│   1200 │   │   │   │   result = next(effect)                                │
│   1201 │   │   │   │   if _is_exception(result):                            │
└─────────────────────────────────────────────────────────────────────────────┘
Exception: Generic backtest error
[2025-08-07 23:29:10] INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:10] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Refreshing 5 symbols                            
                      DEBUG    Fetching RELIANCE (1/5)                         
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['RELIANCE.NS', 1, 0])                      
                      DEBUG      Entering history()                            
                      DEBUG    RELIANCE.NS: Yahoo GET parameters: {'period1':  
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    RELIANCE.NS: yfinance received OHLC data:       
                               2022-08-08 03:45:00 -> 2025-08-06 03:45:00      
                      DEBUG    RELIANCE.NS: OHLC after cleaning: 2022-08-08    
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    RELIANCE.NS: OHLC after combining events:       
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG    RELIANCE.NS: yfinance returning OHLC: 2022-08-08
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\RELIANCE.NS.csv       
[2025-08-07 23:29:11] DEBUG    Fetching TCS (2/5)                              
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['TCS.NS', 1, 0])                           
                      DEBUG      Entering history()                            
                      DEBUG    TCS.NS: Yahoo GET parameters: {'period1':       
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    TCS.NS: yfinance received OHLC data: 2022-08-08 
                               03:45:00 -> 2025-08-06 03:45:00                 
                      DEBUG    TCS.NS: OHLC after cleaning: 2022-08-08         
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    TCS.NS: OHLC after combining events: 2022-08-08 
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG    TCS.NS: yfinance returning OHLC: 2022-08-08     
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\TCS.NS.csv            
[2025-08-07 23:29:12] DEBUG    Fetching INFY (3/5)                             
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['INFY.NS', 1, 0])                          
                      DEBUG      Entering history()                            
                      DEBUG    INFY.NS: Yahoo GET parameters: {'period1':      
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    INFY.NS: yfinance received OHLC data: 2022-08-08
                               03:45:00 -> 2025-08-06 03:45:00                 
                      DEBUG    INFY.NS: OHLC after cleaning: 2022-08-08        
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    INFY.NS: OHLC after combining events: 2022-08-08
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG    INFY.NS: yfinance returning OHLC: 2022-08-08    
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\INFY.NS.csv           
                      DEBUG    Fetching HDFCBANK (4/5)                         
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['HDFCBANK.NS', 1, 0])                      
                      DEBUG      Entering history()                            
                      DEBUG    HDFCBANK.NS: Yahoo GET parameters: {'period1':  
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    HDFCBANK.NS: yfinance received OHLC data:       
                               2022-08-08 03:45:00 -> 2025-08-06 03:45:00      
                      DEBUG    HDFCBANK.NS: OHLC after cleaning: 2022-08-08    
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    HDFCBANK.NS: OHLC after combining events:       
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG    HDFCBANK.NS: yfinance returning OHLC: 2022-08-08
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\HDFCBANK.NS.csv       
[2025-08-07 23:29:13] DEBUG    Fetching ICICIBANK (5/5)                        
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['ICICIBANK.NS', 1, 0])                     
                      DEBUG      Entering history()                            
                      DEBUG    ICICIBANK.NS: Yahoo GET parameters: {'period1': 
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    ICICIBANK.NS: yfinance received OHLC data:      
                               2022-08-08 03:45:00 -> 2025-08-06 03:45:00      
                      DEBUG    ICICIBANK.NS: OHLC after cleaning: 2022-08-08   
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    ICICIBANK.NS: OHLC after combining events:      
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG    ICICIBANK.NS: yfinance returning OHLC:          
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\ICICIBANK.NS.csv      
                      INFO     Successfully refreshed 5/5 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                 Top Strategies by Edge Score                 
┌────────┬────────────┬────────────┬───────┬────────┬────────┐
│ Symbol │ Rule Stack │ Edge Score │ Win % │ Sharpe │ Trades │
├────────┼────────────┼────────────┼───────┼────────┼────────┤
│ TEST   │ test       │      0.750 │ 65.0% │   1.20 │     10 │
└────────┴────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 1 valid strategies across 1 symbols.
[5/5] Saving results...
                      INFO     Saving 1 strategies to the database.            
                      DEBUG    Started transaction for batch save              
                      DEBUG    Strategy TEST total_trades: type=<class 'int'>, 
                               value=10                                        
                      DEBUG    Inserting total_trades as: 10 (type: <class     
                               'int'>)                                         
                      INFO     Successfully saved 1 strategies                 
                      INFO     Saved 1 strategies to the database.             
[5/5] Generating report...
[2025-08-07 23:29:14] INFO     Downloading fresh data for ^NSEI                
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['^NSEI', 1, 0])                            
                      DEBUG      Entering history()                            
                      DEBUG    ^NSEI: Yahoo GET parameters: {'period1':        
                               '2024-08-07 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    ^NSEI: yfinance received OHLC data: 2024-08-07  
                               03:45:00 -> 2025-08-06 03:45:00                 
                      DEBUG    ^NSEI: OHLC after cleaning: 2024-08-07          
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    ^NSEI: OHLC after combining events: 2024-08-07  
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG    ^NSEI: yfinance returning OHLC: 2024-08-07      
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\INDEX_NSEI.csv        
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 1 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Added new OPEN position for TEST at 0.0.        
                      INFO     Added 1 new positions                           
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 3.55s                

Performance Summary:
Total Duration: 3.55s
Slowest Function: full_backtest
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:14] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Refreshing 5 symbols                            
[2025-08-07 23:29:17] INFO     Successfully refreshed 5/5 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10, initial_capital=100000.0         
                      WARNING  Walk-forward analysis disabled for RELIANCE,    
                               using in-sample optimization                    
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for RELIANCE. Forcing 
                               daily frequency ('D').                          
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
                      INFO     find_optimal_strategies completed in 0.42s      
                      WARNING  Walk-forward analysis disabled for TCS, using   
                               in-sample optimization                          
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for TCS. Forcing daily
                               frequency ('D').                                
                      INFO     Testing combinations with best individual rule: 
                               test_baseline                                   
[2025-08-07 23:29:18] INFO     find_optimal_strategies completed in 0.35s      
                      WARNING  Walk-forward analysis disabled for INFY, using  
                               in-sample optimization                          
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for INFY. Forcing     
                               daily frequency ('D').                          
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
                      INFO     find_optimal_strategies completed in 0.29s      
                      WARNING  Walk-forward analysis disabled for HDFCBANK,    
                               using in-sample optimization                    
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for HDFCBANK. Forcing 
                               daily frequency ('D').                          
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
                      INFO     find_optimal_strategies completed in 0.32s      
                      WARNING  Walk-forward analysis disabled for ICICIBANK,   
                               using in-sample optimization                    
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for ICICIBANK. Forcing
                               daily frequency ('D').                          
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
[2025-08-07 23:29:19] INFO     find_optimal_strategies completed in 0.36s      
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                         Top Strategies by Edge Score                          
┌───────────┬──────────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol    │ Rule Stack               │ Edge Score │ Win % │ Sharpe │ Trades │
├───────────┼──────────────────────────┼────────────┼───────┼────────┼────────┤
│ ICICIBANK │ test_momentum            │      0.690 │ 63.2% │   0.78 │     19 │
│ HDFCBANK  │ test_momentum            │      0.598 │ 52.9% │   0.70 │     17 │
│ RELIANCE  │ test_momentum +          │      0.487 │ 55.6% │   0.38 │     36 │
│           │ test_baseline            │            │       │        │        │
│ TCS       │ test_baseline            │      0.408 │ 54.3% │   0.20 │     35 │
│ INFY      │ test_momentum            │      0.294 │ 35.0% │   0.21 │     20 │
└───────────┴──────────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 5 valid strategies across 5 symbols.
[5/5] Saving results...
                      INFO     Saving 5 strategies to the database.            
                      INFO     Successfully saved 5 strategies                 
                      INFO     Saved 5 strategies to the database.             
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 5 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Added new OPEN position for RELIANCE at         
                               1392.800048828125.                              
                      INFO     Added new OPEN position for TCS at              
                               3032.300048828125.                              
                      INFO     Added new OPEN position for INFY at             
                               1436.699951171875.                              
                      INFO     Added new OPEN position for HDFCBANK at         
                               1985.300048828125.                              
                      INFO     Added new OPEN position for ICICIBANK at        
                               1443.5999755859375.                             
                      INFO     Added 5 new positions                           
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 4.49s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:19] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Refreshing 5 symbols                            
                      DEBUG    Fetching RELIANCE (1/5)                         
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['RELIANCE.NS', 1, 0])                      
                      DEBUG      Entering history()                            
                      DEBUG    RELIANCE.NS: Yahoo GET parameters: {'period1':  
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    RELIANCE.NS: yfinance received OHLC data:       
                               2022-08-08 03:45:00 -> 2025-08-06 03:45:00      
                      DEBUG    RELIANCE.NS: OHLC after cleaning: 2022-08-08    
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    RELIANCE.NS: OHLC after combining events:       
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG    RELIANCE.NS: yfinance returning OHLC: 2022-08-08
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\RELIANCE.NS.csv       
[2025-08-07 23:29:20] DEBUG    Fetching TCS (2/5)                              
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['TCS.NS', 1, 0])                           
                      DEBUG      Entering history()                            
                      DEBUG    TCS.NS: Yahoo GET parameters: {'period1':       
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    TCS.NS: yfinance received OHLC data: 2022-08-08 
                               03:45:00 -> 2025-08-06 03:45:00                 
                      DEBUG    TCS.NS: OHLC after cleaning: 2022-08-08         
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    TCS.NS: OHLC after combining events: 2022-08-08 
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG    TCS.NS: yfinance returning OHLC: 2022-08-08     
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\TCS.NS.csv            
                      DEBUG    Fetching INFY (3/5)                             
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['INFY.NS', 1, 0])                          
                      DEBUG      Entering history()                            
                      DEBUG    INFY.NS: Yahoo GET parameters: {'period1':      
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    INFY.NS: yfinance received OHLC data: 2022-08-08
                               03:45:00 -> 2025-08-06 03:45:00                 
                      DEBUG    INFY.NS: OHLC after cleaning: 2022-08-08        
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    INFY.NS: OHLC after combining events: 2022-08-08
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG    INFY.NS: yfinance returning OHLC: 2022-08-08    
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\INFY.NS.csv           
[2025-08-07 23:29:21] DEBUG    Fetching HDFCBANK (4/5)                         
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['HDFCBANK.NS', 1, 0])                      
                      DEBUG      Entering history()                            
                      DEBUG    HDFCBANK.NS: Yahoo GET parameters: {'period1':  
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    HDFCBANK.NS: yfinance received OHLC data:       
                               2022-08-08 03:45:00 -> 2025-08-06 03:45:00      
                      DEBUG    HDFCBANK.NS: OHLC after cleaning: 2022-08-08    
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    HDFCBANK.NS: OHLC after combining events:       
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG    HDFCBANK.NS: yfinance returning OHLC: 2022-08-08
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\HDFCBANK.NS.csv       
                      DEBUG    Fetching ICICIBANK (5/5)                        
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['ICICIBANK.NS', 1, 0])                     
                      DEBUG      Entering history()                            
                      DEBUG    ICICIBANK.NS: Yahoo GET parameters: {'period1': 
                               '2022-08-08 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    ICICIBANK.NS: yfinance received OHLC data:      
                               2022-08-08 03:45:00 -> 2025-08-06 03:45:00      
                      DEBUG    ICICIBANK.NS: OHLC after cleaning: 2022-08-08   
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    ICICIBANK.NS: OHLC after combining events:      
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG    ICICIBANK.NS: yfinance returning OHLC:          
                               2022-08-08 00:00:00+05:30 -> 2025-08-06         
                               00:00:00+05:30                                  
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\ICICIBANK.NS.csv      
                      INFO     Successfully refreshed 5/5 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10, initial_capital=100000.0         
                      WARNING  Walk-forward analysis disabled for RELIANCE,    
                               using in-sample optimization                    
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for RELIANCE. Forcing 
                               daily frequency ('D').                          
                      DEBUG    Forward-filled NaN values after frequency       
                               adjustment for RELIANCE                         
                      DEBUG    SMA crossover signals: 55 triggers              
                      DEBUG    Combined exit signals: 54 total                 
                      DEBUG    Raw entry signals for RELIANCE: 55 total        
                      DEBUG    Final entry signals for RELIANCE: 55 total      
                      DEBUG    Exit signals for RELIANCE: 54 total             
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-27     
                               00:00:00'), Timestamp('2022-09-09 00:00:00'),   
                               Timestamp('2022-10-04 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-06-05      
                               00:00:00'), Timestamp('2025-06-20 00:00:00'),   
                               Timestamp('2025-08-02 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 16 valid values                 
                      DEBUG    Portfolio trades count for RELIANCE: 41         
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      DEBUG    RSI confirmation signals: 836 triggers (momentum
                               + recovery)                                     
                      DEBUG    Combined exit signals: 831 total                
                      DEBUG    Raw entry signals for RELIANCE: 836 total       
                      DEBUG    Final entry signals for RELIANCE: 836 total     
                      DEBUG    Exit signals for RELIANCE: 831 total            
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-10     
                               00:00:00'), Timestamp('2022-08-11 00:00:00'),   
                               Timestamp('2022-08-12 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-07-20      
                               00:00:00'), Timestamp('2025-07-29 00:00:00'),   
                               Timestamp('2025-08-04 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
[2025-08-07 23:29:22] DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 2 valid values                  
                      DEBUG    Calculated ATR: 3 valid values                  
                      DEBUG    Calculated ATR: 4 valid values                  
                      DEBUG    Calculated ATR: 5 valid values                  
                      DEBUG    Calculated ATR: 6 valid values                  
                      DEBUG    Calculated ATR: 7 valid values                  
                      DEBUG    Calculated ATR: 8 valid values                  
                      DEBUG    Calculated ATR: 9 valid values                  
                      DEBUG    Calculated ATR: 10 valid values                 
                      DEBUG    Calculated ATR: 11 valid values                 
                      DEBUG    Calculated ATR: 12 valid values                 
                      DEBUG    Calculated ATR: 13 valid values                 
                      DEBUG    Calculated ATR: 14 valid values                 
                      DEBUG    Calculated ATR: 15 valid values                 
                      DEBUG    Calculated ATR: 16 valid values                 
                      DEBUG    Calculated ATR: 17 valid values                 
                      DEBUG    Portfolio trades count for RELIANCE: 21         
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
                      DEBUG    RSI confirmation signals: 836 triggers (momentum
                               + recovery)                                     
                      DEBUG    SMA crossover signals: 55 triggers              
                      DEBUG    Combined exit signals: 48 total                 
                      DEBUG    Raw entry signals for RELIANCE: 48 total        
                      DEBUG    Final entry signals for RELIANCE: 48 total      
                      DEBUG    Exit signals for RELIANCE: 48 total             
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-27     
                               00:00:00'), Timestamp('2022-09-09 00:00:00'),   
                               Timestamp('2022-10-04 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-05-15      
                               00:00:00'), Timestamp('2025-06-05 00:00:00'),   
                               Timestamp('2025-06-20 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 16 valid values                 
                      DEBUG    Portfolio trades count for RELIANCE: 36         
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     find_optimal_strategies completed in 0.47s      
                      WARNING  Walk-forward analysis disabled for TCS, using   
                               in-sample optimization                          
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for TCS. Forcing daily
                               frequency ('D').                                
                      DEBUG    Forward-filled NaN values after frequency       
                               adjustment for TCS                              
                      DEBUG    SMA crossover signals: 55 triggers              
                      DEBUG    Combined exit signals: 55 total                 
                      DEBUG    Raw entry signals for TCS: 55 total             
                      DEBUG    Final entry signals for TCS: 55 total           
                      DEBUG    Exit signals for TCS: 55 total                  
                      DEBUG    First 3 entry dates: [Timestamp('2022-09-09     
                               00:00:00'), Timestamp('2022-09-29 00:00:00'),   
                               Timestamp('2022-10-04 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-05-28      
                               00:00:00'), Timestamp('2025-06-10 00:00:00'),   
                               Timestamp('2025-06-28 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Portfolio trades count for TCS: 35              
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      DEBUG    RSI confirmation signals: 794 triggers (momentum
                               + recovery)                                     
                      DEBUG    Combined exit signals: 793 total                
                      DEBUG    Raw entry signals for TCS: 794 total            
                      DEBUG    Final entry signals for TCS: 794 total          
                      DEBUG    Exit signals for TCS: 793 total                 
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-11     
                               00:00:00'), Timestamp('2022-08-12 00:00:00'),   
                               Timestamp('2022-08-13 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-07-07      
                               00:00:00'), Timestamp('2025-07-08 00:00:00'),   
                               Timestamp('2025-08-04 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 2 valid values                  
                      DEBUG    Calculated ATR: 3 valid values                  
                      DEBUG    Calculated ATR: 4 valid values                  
                      DEBUG    Calculated ATR: 5 valid values                  
                      DEBUG    Calculated ATR: 6 valid values                  
                      DEBUG    Calculated ATR: 7 valid values                  
                      DEBUG    Calculated ATR: 8 valid values                  
                      DEBUG    Calculated ATR: 9 valid values                  
                      DEBUG    Calculated ATR: 10 valid values                 
                      DEBUG    Portfolio trades count for TCS: 28              
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     Testing combinations with best individual rule: 
                               test_baseline                                   
                      DEBUG    SMA crossover signals: 55 triggers              
                      DEBUG    RSI confirmation signals: 794 triggers (momentum
                               + recovery)                                     
                      DEBUG    Combined exit signals: 45 total                 
                      DEBUG    Raw entry signals for TCS: 45 total             
                      DEBUG    Final entry signals for TCS: 45 total           
                      DEBUG    Exit signals for TCS: 45 total                  
                      DEBUG    First 3 entry dates: [Timestamp('2022-09-09     
                               00:00:00'), Timestamp('2022-10-04 00:00:00'),   
                               Timestamp('2022-11-11 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-05-28      
                               00:00:00'), Timestamp('2025-06-10 00:00:00'),   
                               Timestamp('2025-06-28 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Portfolio trades count for TCS: 31              
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     find_optimal_strategies completed in 0.37s      
                      WARNING  Walk-forward analysis disabled for INFY, using  
                               in-sample optimization                          
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for INFY. Forcing     
                               daily frequency ('D').                          
                      DEBUG    Forward-filled NaN values after frequency       
                               adjustment for INFY                             
                      DEBUG    SMA crossover signals: 53 triggers              
                      DEBUG    Combined exit signals: 52 total                 
                      DEBUG    Raw entry signals for INFY: 53 total            
                      DEBUG    Final entry signals for INFY: 53 total          
                      DEBUG    Exit signals for INFY: 52 total                 
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-21     
                               00:00:00'), Timestamp('2022-09-09 00:00:00'),   
                               Timestamp('2022-09-28 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-06-08      
                               00:00:00'), Timestamp('2025-06-29 00:00:00'),   
                               Timestamp('2025-07-20 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 10 valid values                 
                      DEBUG    Portfolio trades count for INFY: 36             
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      DEBUG    RSI confirmation signals: 806 triggers (momentum
                               + recovery)                                     
                      DEBUG    Combined exit signals: 801 total                
                      DEBUG    Raw entry signals for INFY: 806 total           
                      DEBUG    Final entry signals for INFY: 806 total         
                      DEBUG    Exit signals for INFY: 801 total                
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-11     
                               00:00:00'), Timestamp('2022-08-16 00:00:00'),   
                               Timestamp('2022-08-17 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-07-20      
                               00:00:00'), Timestamp('2025-07-21 00:00:00'),   
                               Timestamp('2025-07-23 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 5 valid values                  
                      DEBUG    Calculated ATR: 6 valid values                  
                      DEBUG    Calculated ATR: 8 valid values                  
                      DEBUG    Calculated ATR: 9 valid values                  
                      DEBUG    Calculated ATR: 10 valid values                 
                      DEBUG    Portfolio trades count for INFY: 20             
[2025-08-07 23:29:23] DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
                      DEBUG    RSI confirmation signals: 806 triggers (momentum
                               + recovery)                                     
                      DEBUG    SMA crossover signals: 53 triggers              
                      DEBUG    Combined exit signals: 46 total                 
                      DEBUG    Raw entry signals for INFY: 47 total            
                      DEBUG    Final entry signals for INFY: 47 total          
                      DEBUG    Exit signals for INFY: 46 total                 
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-21     
                               00:00:00'), Timestamp('2022-09-09 00:00:00'),   
                               Timestamp('2022-10-16 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-06-08      
                               00:00:00'), Timestamp('2025-06-29 00:00:00'),   
                               Timestamp('2025-07-20 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 10 valid values                 
                      DEBUG    Portfolio trades count for INFY: 31             
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     find_optimal_strategies completed in 0.38s      
                      WARNING  Walk-forward analysis disabled for HDFCBANK,    
                               using in-sample optimization                    
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for HDFCBANK. Forcing 
                               daily frequency ('D').                          
                      DEBUG    Forward-filled NaN values after frequency       
                               adjustment for HDFCBANK                         
                      DEBUG    SMA crossover signals: 55 triggers              
                      DEBUG    Combined exit signals: 54 total                 
                      DEBUG    Raw entry signals for HDFCBANK: 55 total        
                      DEBUG    Final entry signals for HDFCBANK: 55 total      
                      DEBUG    Exit signals for HDFCBANK: 54 total             
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-31     
                               00:00:00'), Timestamp('2022-10-04 00:00:00'),   
                               Timestamp('2022-10-16 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-06-20      
                               00:00:00'), Timestamp('2025-07-09 00:00:00'),   
                               Timestamp('2025-07-23 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Portfolio trades count for HDFCBANK: 39         
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      DEBUG    RSI confirmation signals: 908 triggers (momentum
                               + recovery)                                     
                      DEBUG    Combined exit signals: 888 total                
                      DEBUG    Raw entry signals for HDFCBANK: 908 total       
                      DEBUG    Final entry signals for HDFCBANK: 908 total     
                      DEBUG    Exit signals for HDFCBANK: 888 total            
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-10     
                               00:00:00'), Timestamp('2022-08-11 00:00:00'),   
                               Timestamp('2022-08-12 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-08-04      
                               00:00:00'), Timestamp('2025-08-05 00:00:00'),   
                               Timestamp('2025-08-06 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 2 valid values                  
                      DEBUG    Calculated ATR: 3 valid values                  
                      DEBUG    Calculated ATR: 4 valid values                  
                      DEBUG    Calculated ATR: 5 valid values                  
                      DEBUG    Calculated ATR: 6 valid values                  
                      DEBUG    Calculated ATR: 7 valid values                  
                      DEBUG    Calculated ATR: 8 valid values                  
                      DEBUG    Calculated ATR: 9 valid values                  
                      DEBUG    Calculated ATR: 10 valid values                 
                      DEBUG    Calculated ATR: 11 valid values                 
                      DEBUG    Calculated ATR: 13 valid values                 
                      DEBUG    Calculated ATR: 14 valid values                 
                      DEBUG    Calculated ATR: 15 valid values                 
                      DEBUG    Calculated ATR: 16 valid values                 
                      DEBUG    Calculated ATR: 17 valid values                 
                      DEBUG    Portfolio trades count for HDFCBANK: 17         
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
                      DEBUG    RSI confirmation signals: 908 triggers (momentum
                               + recovery)                                     
                      DEBUG    SMA crossover signals: 55 triggers              
                      DEBUG    Combined exit signals: 51 total                 
                      DEBUG    Raw entry signals for HDFCBANK: 52 total        
                      DEBUG    Final entry signals for HDFCBANK: 52 total      
                      DEBUG    Exit signals for HDFCBANK: 51 total             
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-31     
                               00:00:00'), Timestamp('2022-10-04 00:00:00'),   
                               Timestamp('2022-10-16 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-06-20      
                               00:00:00'), Timestamp('2025-07-09 00:00:00'),   
                               Timestamp('2025-07-23 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Portfolio trades count for HDFCBANK: 37         
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     find_optimal_strategies completed in 0.43s      
                      WARNING  Walk-forward analysis disabled for ICICIBANK,   
                               using in-sample optimization                    
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      WARNING  Could not infer frequency for ICICIBANK. Forcing
                               daily frequency ('D').                          
                      DEBUG    Forward-filled NaN values after frequency       
                               adjustment for ICICIBANK                        
                      DEBUG    SMA crossover signals: 63 triggers              
                      DEBUG    Combined exit signals: 62 total                 
                      DEBUG    Raw entry signals for ICICIBANK: 63 total       
                      DEBUG    Final entry signals for ICICIBANK: 63 total     
                      DEBUG    Exit signals for ICICIBANK: 62 total            
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-27     
                               00:00:00'), Timestamp('2022-10-04 00:00:00'),   
                               Timestamp('2022-10-18 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-06-21      
                               00:00:00'), Timestamp('2025-07-08 00:00:00'),   
                               Timestamp('2025-07-18 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 16 valid values                 
                      DEBUG    Portfolio trades count for ICICIBANK: 47        
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      DEBUG    RSI confirmation signals: 937 triggers (momentum
                               + recovery)                                     
                      DEBUG    Combined exit signals: 917 total                
                      DEBUG    Raw entry signals for ICICIBANK: 937 total      
                      DEBUG    Final entry signals for ICICIBANK: 937 total    
                      DEBUG    Exit signals for ICICIBANK: 917 total           
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-10     
                               00:00:00'), Timestamp('2022-08-11 00:00:00'),   
                               Timestamp('2022-08-12 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-08-04      
                               00:00:00'), Timestamp('2025-08-05 00:00:00'),   
                               Timestamp('2025-08-06 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 1 valid values                  
                      DEBUG    Calculated ATR: 2 valid values                  
                      DEBUG    Calculated ATR: 3 valid values                  
                      DEBUG    Calculated ATR: 4 valid values                  
                      DEBUG    Calculated ATR: 5 valid values                  
                      DEBUG    Calculated ATR: 6 valid values                  
                      DEBUG    Calculated ATR: 7 valid values                  
                      DEBUG    Calculated ATR: 8 valid values                  
                      DEBUG    Calculated ATR: 9 valid values                  
                      DEBUG    Calculated ATR: 10 valid values                 
                      DEBUG    Calculated ATR: 11 valid values                 
                      DEBUG    Calculated ATR: 12 valid values                 
                      DEBUG    Calculated ATR: 13 valid values                 
                      DEBUG    Calculated ATR: 14 valid values                 
                      DEBUG    Calculated ATR: 15 valid values                 
                      DEBUG    Calculated ATR: 16 valid values                 
                      DEBUG    Calculated ATR: 17 valid values                 
                      DEBUG    Portfolio trades count for ICICIBANK: 19        
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     Testing combinations with best individual rule: 
                               test_momentum                                   
                      DEBUG    RSI confirmation signals: 937 triggers (momentum
                               + recovery)                                     
                      DEBUG    SMA crossover signals: 63 triggers              
                      DEBUG    Combined exit signals: 60 total                 
                      DEBUG    Raw entry signals for ICICIBANK: 61 total       
                      DEBUG    Final entry signals for ICICIBANK: 61 total     
                      DEBUG    Exit signals for ICICIBANK: 60 total            
                      DEBUG    First 3 entry dates: [Timestamp('2022-08-27     
                               00:00:00'), Timestamp('2022-10-04 00:00:00'),   
                               Timestamp('2022-10-18 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2025-06-21      
                               00:00:00'), Timestamp('2025-07-08 00:00:00'),   
                               Timestamp('2025-07-18 00:00:00')]               
                      DEBUG    Calculated ATR: 1074 valid values               
                      DEBUG    Calculated ATR: 16 valid values                 
                      DEBUG    Portfolio trades count for ICICIBANK: 44        
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      INFO     find_optimal_strategies completed in 0.41s      
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                         Top Strategies by Edge Score                          
┌───────────┬──────────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol    │ Rule Stack               │ Edge Score │ Win % │ Sharpe │ Trades │
├───────────┼──────────────────────────┼────────────┼───────┼────────┼────────┤
│ ICICIBANK │ test_momentum            │      0.690 │ 63.2% │   0.78 │     19 │
│ HDFCBANK  │ test_momentum            │      0.598 │ 52.9% │   0.70 │     17 │
│ RELIANCE  │ test_momentum +          │      0.487 │ 55.6% │   0.38 │     36 │
│           │ test_baseline            │            │       │        │        │
│ TCS       │ test_baseline            │      0.408 │ 54.3% │   0.20 │     35 │
│ INFY      │ test_momentum            │      0.294 │ 35.0% │   0.21 │     20 │
└───────────┴──────────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 5 valid strategies across 5 symbols.
[5/5] Saving results...
                      INFO     Saving 5 strategies to the database.            
                      DEBUG    Started transaction for batch save              
                      DEBUG    Strategy RELIANCE total_trades: type=<class     
                               'int'>, value=36                                
                      DEBUG    Inserting total_trades as: 36 (type: <class     
                               'int'>)                                         
                      DEBUG    Strategy TCS total_trades: type=<class 'int'>,  
                               value=35                                        
                      DEBUG    Inserting total_trades as: 35 (type: <class     
                               'int'>)                                         
                      DEBUG    Strategy INFY total_trades: type=<class 'int'>, 
                               value=20                                        
                      DEBUG    Inserting total_trades as: 20 (type: <class     
                               'int'>)                                         
                      DEBUG    Strategy HDFCBANK total_trades: type=<class     
                               'int'>, value=17                                
[2025-08-07 23:29:24] DEBUG    Inserting total_trades as: 17 (type: <class     
                               'int'>)                                         
                      DEBUG    Strategy ICICIBANK total_trades: type=<class    
                               'int'>, value=19                                
                      DEBUG    Inserting total_trades as: 19 (type: <class     
                               'int'>)                                         
                      INFO     Successfully saved 5 strategies                 
                      INFO     Saved 5 strategies to the database.             
[5/5] Generating report...
                      INFO     Downloading fresh data for ^NSEI                
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['^NSEI', 1, 0])                            
                      DEBUG      Entering history()                            
                      DEBUG    ^NSEI: Yahoo GET parameters: {'period1':        
                               '2024-08-07 00:00:00+05:30', 'period2':         
                               '2025-08-07 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG    ^NSEI: yfinance received OHLC data: 2024-08-07  
                               03:45:00 -> 2025-08-06 03:45:00                 
                      DEBUG    ^NSEI: OHLC after cleaning: 2024-08-07          
                               09:15:00+05:30 -> 2025-08-06 09:15:00+05:30     
                      DEBUG    ^NSEI: OHLC after combining events: 2024-08-07  
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG    ^NSEI: yfinance returning OHLC: 2024-08-07      
                               00:00:00+05:30 -> 2025-08-06 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      DEBUG    Saved cache to data\cache\INDEX_NSEI.csv        
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 5 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Added new OPEN position for RELIANCE at         
                               1392.800048828125.                              
                      INFO     Added new OPEN position for TCS at              
                               3032.300048828125.                              
                      INFO     Added new OPEN position for INFY at             
                               1436.699951171875.                              
                      INFO     Added new OPEN position for HDFCBANK at         
                               1985.300048828125.                              
                      INFO     Added new OPEN position for ICICIBANK at        
                               1443.5999755859375.                             
                      INFO     Added 5 new positions                           
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 4.67s                

Performance Summary:
Total Duration: 5.08s
Slowest Function: full_backtest
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:24] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Skipping data refresh (freeze mode).
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 5 symbols from universe                  
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10, initial_capital=100000.0         
                      ERROR    Data file not found for RELIANCE: Cached data   
                               not found for RELIANCE (freeze mode)            
                      ERROR    Data file not found for TCS: Cached data not    
                               found for TCS (freeze mode)                     
                      ERROR    Data file not found for INFY: Cached data not   
                               found for INFY (freeze mode)                    
                      ERROR    Data file not found for HDFCBANK: Cached data   
                               not found for HDFCBANK (freeze mode)            
                      ERROR    Data file not found for ICICIBANK: Cached data  
                               not found for ICICIBANK (freeze mode)           
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      WARNING  Could not load NIFTY data for benchmark: Cached 
                               data not found for ^NSEI (freeze mode)          
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-01-01.md 
* Report generated: reports\signals_2025-01-01.md
                      INFO     full_backtest completed in 0.03s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:24] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
Error: Invalid isoformat string for freeze_date: 'invalid-date'
[2025-08-07 23:29:24] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:25] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:25] INFO     === KISS Signal CLI Run Started ===             
Error: Database file not found at data\kiss_signal.db
[2025-08-07 23:29:25] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\kiss_signal.db        
                      INFO     Successfully created database at                
                               data\kiss_signal.db                             
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      WARNING  Insufficient data for RELIANCE, skipping        
                      WARNING  Insufficient data for TCS, skipping             
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      INFO     Report generated: reports\signals_2025-08-07.md 
* Report generated: reports\signals_2025-08-07.md
                      INFO     full_backtest completed in 0.01s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
                      ERROR    Critical error: Could not save log file to      
                               C:\Users\user\AppData\Local\Temp\tmpjz47oua4\rea
                               donly.log. Reason: [Errno 13] Permission denied:
                               'C:\\Users\\user\\AppData\\Local\\Temp\\tmpjz47o
                               ua4\\readonly.log'                              
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\cli.py
                               ", line 298, in _save_command_log               
                                   log_path.write_text(console.export_text(clea
                               r=False), encoding="utf-8")                     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\pathlib.py", line 1047, in write_text
                                   with self.open(mode='w', encoding=encoding, 
                               errors=errors, newline=newline) as f:           
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                 
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\pathlib.py", line 1013, in open      
                                   return io.open(self, mode, buffering,       
                               encoding, errors, newline)                      
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^^^^^^^^^^^^^^^^^^                            
                               PermissionError: [Errno 13] Permission denied:  
                               'C:\\Users\\user\\AppData\\Local\\Temp\\tmpjz47o
                               ua4\\readonly.log'                              
                      INFO     Log file saved to                               
                               C:\Users\user\AppData\Local\Temp\tmpu31pfjp2.log
                      INFO     Loaded 2 symbols from universe                  
                      ERROR    Universe file not found: nonexistent.csv        
[2025-08-07 23:29:26] WARNING  OSError checking cache status for TEST.NS.csv,  
                               assuming refresh needed.                        
                      WARNING  Negative prices detected for RELIANCE           
                      WARNING  High zero-volume days for RELIANCE              
                      WARNING  Empty data for RELIANCE                         
                      WARNING  Large data gap detected for RELIANCE: 9.0 days  
                      ERROR    Failed to save cache for TEST: Disk full        
                      WARNING  Limited data for RELIANCE: only 5 rows          
                      WARNING  Limited data for RELIANCE: only 3 rows          
                      WARNING  Limited data for RELIANCE: only 3 rows          
                      WARNING  Limited data for TESTSTOCK: only 5 rows         
                      WARNING  Limited data for TESTSTOCK: only 4 rows         
                      WARNING  Limited data for TESTSTOCK: only 3 rows         
                      INFO     Downloading fresh data for BPCL                 
                      WARNING  Limited data for BPCL: only 2 rows              
                      INFO     Downloading fresh data for ^NSEI                
                      INFO     Downloading fresh data for RELIANCE             
                      WARNING  Limited data for RELIANCE: only 3 rows          
                      INFO     Freeze mode active, skipping cache refresh      
                      INFO     Refreshing 1 symbols                            
                      INFO     Successfully refreshed 1/1 symbols              
                      ERROR    Missing required columns for RELIANCE.NS:       
                               Index(['index', 'open'], dtype='object')        
                      INFO     Refreshing 1 symbols                            
                      ERROR    Failed to fetch data for RELIANCE.NS: 'NoneType'
                               object has no attribute 'empty'                 
[2025-08-07 23:29:27] ERROR    Failed to fetch data for RELIANCE.NS: 'NoneType'
                               object has no attribute 'empty'                 
[2025-08-07 23:29:28] ERROR    Failed to fetch data for RELIANCE.NS: 'NoneType'
                               object has no attribute 'empty'                 
                      WARNING  Failed to fetch data for RELIANCE after 3       
                               attempts                                        
                      INFO     Successfully refreshed 0/1 symbols              
                      INFO     Refreshing 1 symbols                            
                      ERROR    Missing required columns for RELIANCE.NS:       
                               Index(['index', 'open', 'high', 'low', 'close', 
                               'volume'], dtype='object')                      
[2025-08-07 23:29:29] ERROR    Missing required columns for RELIANCE.NS:       
                               Index(['index', 'open', 'high', 'low', 'close', 
                               'volume'], dtype='object')                      
[2025-08-07 23:29:31] ERROR    Missing required columns for RELIANCE.NS:       
                               Index(['index', 'open', 'high', 'low', 'close', 
                               'volume'], dtype='object')                      
                      WARNING  Failed to fetch data for RELIANCE after 3       
                               attempts                                        
                      INFO     Successfully refreshed 0/1 symbols              
                      INFO     Refreshing 1 symbols                            
                      ERROR    Failed to fetch data for RELIANCE.NS: API Error 
[2025-08-07 23:29:32] ERROR    Failed to fetch data for RELIANCE.NS: API Error 
[2025-08-07 23:29:33] ERROR    Failed to fetch data for RELIANCE.NS: API Error 
                      WARNING  Failed to fetch data for RELIANCE after 3       
                               attempts                                        
                      INFO     Successfully refreshed 0/1 symbols              
                      INFO     Refreshing 1 symbols                            
                      DEBUG    Empty data for RELIANCE.NS, retrying in 2s      
                               (attempt 1/3)                                   
[2025-08-07 23:29:35] DEBUG    Empty data for RELIANCE.NS, retrying in 4s      
                               (attempt 2/3)                                   
[2025-08-07 23:29:39] WARNING  No data returned for RELIANCE.NS after 3        
                               attempts                                        
[2025-08-07 23:29:40] DEBUG    Empty data for RELIANCE.NS, retrying in 2s      
                               (attempt 1/3)                                   
[2025-08-07 23:29:42] DEBUG    Empty data for RELIANCE.NS, retrying in 4s      
                               (attempt 2/3)                                   
[2025-08-07 23:29:46] WARNING  No data returned for RELIANCE.NS after 3        
                               attempts                                        
[2025-08-07 23:29:48] DEBUG    Empty data for RELIANCE.NS, retrying in 2s      
                               (attempt 1/3)                                   
[2025-08-07 23:29:50] DEBUG    Empty data for RELIANCE.NS, retrying in 4s      
                               (attempt 2/3)                                   
[2025-08-07 23:29:54] WARNING  No data returned for RELIANCE.NS after 3        
                               attempts                                        
                      WARNING  Failed to fetch data for RELIANCE after 3       
                               attempts                                        
                      INFO     Successfully refreshed 0/1 symbols              
                      INFO     Refreshing 2 symbols                            
                      INFO     Successfully refreshed 2/2 symbols              
[2025-08-07 23:29:55] WARNING  Limited data for TEST: only 3 rows              
                      INFO     Downloading fresh data for ^NSEI                
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=5, initial_capital=100000.0          
                      WARNING  Walk-forward analysis disabled for TEST, using  
                               in-sample optimization                          
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      INFO     Using data up to freeze date: 2023-03-31        
                      WARNING  Could not generate entry signals for combo:     
                               ['sma_10_20_crossover']                         
                      WARNING  Strategy 'rsi_oversold_30' on 'TEST' generated  
                               only 1 trades, below threshold of 5.            
                      INFO     find_optimal_strategies completed in 0.10s      
                      INFO     Loaded 2 symbols from universe                  
[2025-08-07 23:29:55] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\pytest-of-user\
                               pytest-1041\test_end_to_end_cli_workflow0\integr
                               ation.db                                        
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\pytest-of-user\
                               pytest-1041\test_end_to_end_cli_workflow0\integr
                               ation.db                                        
[1/4] Configuration loaded.
[2/4] Skipping data refresh (freeze mode).
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 2 symbols from universe                  
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10, initial_capital=100000.0         
                      WARNING  Walk-forward analysis disabled for RELIANCE,    
                               using in-sample optimization                    
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      INFO     Using data up to freeze date: 2024-06-01        
                      INFO     Testing combinations with best individual rule: 
                               sma_10_20_crossover                             
                      INFO     find_optimal_strategies completed in 0.26s      
                      WARNING  Walk-forward analysis disabled for INFY, using  
                               in-sample optimization                          
                      WARNING  USING IN-SAMPLE OPTIMIZATION - Results are NOT  
                               reliable for live trading!                      
                      INFO     Using data up to freeze date: 2024-06-01        
[2025-08-07 23:29:56] INFO     Testing combinations with best individual rule: 
                               sma_10_20_crossover                             
                      INFO     find_optimal_strategies completed in 0.24s      
[4/4] Analysis complete. Results summary:
In-Sample Results (NOT reliable for live trading)
                      Top Strategies by Edge Score                       
┌──────────┬─────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack          │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼─────────────────────┼────────────┼───────┼────────┼────────┤
│ INFY     │ sma_10_20_crossover │     -0.597 │  7.1% │  -1.60 │     14 │
│ RELIANCE │ sma_10_20_crossover │     -0.742 │  7.1% │  -1.96 │     14 │
└──────────┴─────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 2 valid strategies across 2 symbols.
[5/5] Saving results...
                      INFO     Saving 2 strategies to the database.            
                      INFO     Successfully saved 2 strategies                 
                      INFO     Saved 2 strategies to the database.             
[5/5] Generating report...
                      WARNING  Could not load NIFTY data for benchmark: Cached 
                               data not found for ^NSEI (freeze mode)          
                      INFO     Fetched 0 open positions.                       
                      INFO     Fetched 0 open positions.                       
                      INFO     Identified 2 new signals (filtered 0 existing   
                               positions)                                      
                      INFO     Added new OPEN position for RELIANCE at         
                               121.4748436033904.                              
                      INFO     Added new OPEN position for INFY at             
                               123.60567966625928.                             
                      INFO     Added 2 new positions                           
                      INFO     Report generated:                               
                               C:\Users\user\AppData\Local\Temp\pytest-of-user\
                               pytest-1041\test_end_to_end_cli_workflow0\report
                               s\signals_2024-06-01.md                         
* Report generated: 
C:\Users\user\AppData\Local\Temp\pytest-of-user\pytest-1041\test_end_to_end_cli
_workflow0\reports\signals_2024-06-01.md
                      INFO     full_backtest completed in 0.56s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-08-07 23:29:56] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
