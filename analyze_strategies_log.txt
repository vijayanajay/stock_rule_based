[2025-07-22 22:57:12] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:12] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:12] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpsio4euaq\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpsio4euaq\tes
                               t.db                                            
[2025-07-22 22:57:12] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=30,         
                               min_trades=15                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Rule 'sma_crossover' generated 4 signals on 100 
                               data points                                     
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=1                                    
                      INFO     Backtesting 2 rule combinations for TEST.NS     
[2025-07-22 22:57:26] WARNING  Strategy 'sma_crossover_test' on 'TEST.NS'      
                               generated only 0 trades, below threshold of 1.  
                      WARNING  Strategy 'sma_crossover_test +                  
                               rsi_oversold_test' on 'TEST.NS' generated only 0
                               trades, below threshold of 1.                   
                      INFO     find_optimal_strategies completed in 13.44s     
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtesting 2 rule combinations for TEST.NS     
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      WARNING  Strategy 'sma_crossover_test' on 'TEST.NS'      
                               generated only 2 trades, below threshold of 10. 
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 64 signals on 100 
                               data points                                     
                      WARNING  Strategy 'sma_crossover_test +                  
                               rsi_oversold_test' on 'TEST.NS' generated only 2
                               trades, below threshold of 10.                  
                      INFO     find_optimal_strategies completed in 0.08s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      WARNING  Multiple stop_loss_pct rules found, using first 
                               one: 5.0%                                       
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      WARNING  Multiple take_profit_pct rules found, using     
                               first one: 15.0%                                
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      ERROR    Failed to generate exit signals for             
                               faulty_exit_rule: Rule function                 
                               'nonexistent_rule_type' not found in rules      
                               module                                          
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      WARNING  No baseline rule found in configuration for     
                               TEST.NS.                                        
                      INFO     find_optimal_strategies completed in 0.00s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      WARNING  Could not infer frequency for TEST.NS. Forcing  
                               daily frequency ('D').                          
                      INFO     Backtesting 2 rule combinations for TEST.NS     
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      WARNING  Strategy 'sma_crossover_test' on 'TEST.NS'      
                               generated only 2 trades, below threshold of 10. 
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 64 signals on 100 
                               data points                                     
                      WARNING  Strategy 'sma_crossover_test +                  
                               rsi_oversold_test' on 'TEST.NS' generated only 2
                               trades, below threshold of 10.                  
                      INFO     find_optimal_strategies completed in 0.05s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      WARNING  Could not infer frequency for TEST_INTRA.NS.    
                               Forcing daily frequency ('D').                  
                      DEBUG    Forward-filled NaN values after frequency       
                               adjustment for TEST_INTRA.NS                    
                      INFO     Backtesting 2 rule combinations for             
                               TEST_INTRA.NS                                   
                      WARNING  Insufficient data: 3 rows, need 20              
                      INFO     Rule 'sma_crossover' generated 0 signals on 3   
                               data points                                     
                      DEBUG    Combined exit signals: 0 total                  
                      DEBUG    Raw entry signals for TEST_INTRA.NS: 0 total    
                      DEBUG    Final entry signals for TEST_INTRA.NS: 0 total  
                      DEBUG    Exit signals for TEST_INTRA.NS: 0 total         
                      DEBUG    Portfolio trades count for TEST_INTRA.NS: 0     
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      WARNING  Strategy 'sma_crossover_test' on 'TEST_INTRA.NS'
                               generated only 0 trades, below threshold of 10. 
                      WARNING  Insufficient data: 3 rows, need 20              
                      INFO     Rule 'sma_crossover' generated 0 signals on 3   
                               data points                                     
                      WARNING  Insufficient data for RSI: 3 rows, need 15      
                      INFO     Rule 'rsi_oversold' generated 0 signals on 3    
                               data points                                     
                      DEBUG    Combined exit signals: 0 total                  
                      DEBUG    Raw entry signals for TEST_INTRA.NS: 0 total    
                      DEBUG    Final entry signals for TEST_INTRA.NS: 0 total  
                      DEBUG    Exit signals for TEST_INTRA.NS: 0 total         
                      DEBUG    Portfolio trades count for TEST_INTRA.NS: 0     
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      WARNING  Strategy 'sma_crossover_test +                  
                               rsi_oversold_test' on 'TEST_INTRA.NS' generated 
                               only 0 trades, below threshold of 10.           
                      INFO     find_optimal_strategies completed in 0.06s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      DEBUG    Inferred frequency 'D' for TEST_INFER_OK.NS     
                      INFO     Backtesting 2 rule combinations for             
                               TEST_INFER_OK.NS                                
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      DEBUG    Combined exit signals: 1 total                  
                      DEBUG    Raw entry signals for TEST_INFER_OK.NS: 2 total 
                      DEBUG    Final entry signals for TEST_INFER_OK.NS: 2     
                               total                                           
                      DEBUG    Exit signals for TEST_INFER_OK.NS: 1 total      
                      DEBUG    First 3 entry dates: [Timestamp('2024-03-02     
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Last 3 entry dates: [Timestamp('2024-03-02      
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Portfolio trades count for TEST_INFER_OK.NS: 2  
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      WARNING  Strategy 'sma_crossover_test' on                
                               'TEST_INFER_OK.NS' generated only 2 trades,     
                               below threshold of 10.                          
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 64 signals on 100 
                               data points                                     
                      DEBUG    Combined exit signals: 1 total                  
                      DEBUG    Raw entry signals for TEST_INFER_OK.NS: 2 total 
                      DEBUG    Final entry signals for TEST_INFER_OK.NS: 2     
                               total                                           
                      DEBUG    Exit signals for TEST_INFER_OK.NS: 1 total      
                      DEBUG    First 3 entry dates: [Timestamp('2024-03-02     
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Last 3 entry dates: [Timestamp('2024-03-02      
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Portfolio trades count for TEST_INFER_OK.NS: 2  
                      DEBUG    Trade count type: <class 'numpy.int64'>         
                      WARNING  Strategy 'sma_crossover_test +                  
                               rsi_oversold_test' on 'TEST_INFER_OK.NS'        
                               generated only 2 trades, below threshold of 10. 
                      INFO     find_optimal_strategies completed in 0.07s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=0                                    
                      DEBUG    Inferred frequency 'D' for TEST_SELL_LOG.NS     
                      INFO     Backtesting 1 rule combinations for             
                               TEST_SELL_LOG.NS                                
                      INFO     Rule 'sma_crossover' generated 4 signals on 100 
                               data points                                     
                      DEBUG    Combined exit signals: 3 total                  
                      DEBUG    Raw entry signals for TEST_SELL_LOG.NS: 4 total 
                      DEBUG    Final entry signals for TEST_SELL_LOG.NS: 4     
                               total                                           
                      DEBUG    Exit signals for TEST_SELL_LOG.NS: 3 total      
                      DEBUG    Stop loss: 5.0%                                 
                      DEBUG    Take profit: 10.0%                              
                      DEBUG    First 3 entry dates: [Timestamp('2024-02-04     
                               00:00:00'), Timestamp('2024-02-26 00:00:00'),   
                               Timestamp('2024-03-09 00:00:00')]               
                      DEBUG    Last 3 entry dates: [Timestamp('2024-02-26      
                               00:00:00'), Timestamp('2024-03-09 00:00:00'),   
                               Timestamp('2024-03-27 00:00:00')]               
                      DEBUG    Portfolio trades count for TEST_SELL_LOG.NS: 1  
                      DEBUG    Trade count type: <class 'int'>                 
                      INFO     find_optimal_strategies completed in 0.02s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtesting 2 rule combinations for TEST.NS     
                      INFO     Rule 'sma_crossover' generated 4 signals on 100 
                               data points                                     
                      WARNING  Strategy 'sma_crossover_baseline' on 'TEST.NS'  
                               generated only 3 trades, below threshold of 10. 
                      INFO     Rule 'sma_crossover' generated 4 signals on 100 
                               data points                                     
                      ERROR    Error processing rule combination               
                               ['sma_crossover_baseline', 'empty_layer_rule']: 
                               Cannot perform 'and_' with a dtyped [bool] array
                               and scalar of type [NoneType]                   
                      INFO     find_optimal_strategies completed in 0.03s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=1                                    
                      DEBUG    Inferred frequency 'D' for TEST_ZERO_TRADES.NS  
                      INFO     Backtesting 2 rule combinations for             
                               TEST_ZERO_TRADES.NS                             
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      DEBUG    Combined exit signals: 1 total                  
                      DEBUG    Raw entry signals for TEST_ZERO_TRADES.NS: 2    
                               total                                           
                      DEBUG    Final entry signals for TEST_ZERO_TRADES.NS: 2  
                               total                                           
                      DEBUG    Exit signals for TEST_ZERO_TRADES.NS: 1 total   
                      DEBUG    First 3 entry dates: [Timestamp('2024-03-02     
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Last 3 entry dates: [Timestamp('2024-03-02      
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Portfolio trades count for TEST_ZERO_TRADES.NS: 
                               0                                               
                      DEBUG    Trade count type: <class 'int'>                 
                      DEBUG    WARNING: 2 entry signals but 0 trades generated!
                      WARNING  Strategy 'sma_crossover_test' on                
                               'TEST_ZERO_TRADES.NS' generated only 0 trades,  
                               below threshold of 1.                           
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 64 signals on 100 
                               data points                                     
                      DEBUG    Combined exit signals: 1 total                  
                      DEBUG    Raw entry signals for TEST_ZERO_TRADES.NS: 2    
                               total                                           
                      DEBUG    Final entry signals for TEST_ZERO_TRADES.NS: 2  
                               total                                           
                      DEBUG    Exit signals for TEST_ZERO_TRADES.NS: 1 total   
                      DEBUG    First 3 entry dates: [Timestamp('2024-03-02     
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Last 3 entry dates: [Timestamp('2024-03-02      
                               00:00:00'), Timestamp('2024-04-03 00:00:00')]   
                      DEBUG    Portfolio trades count for TEST_ZERO_TRADES.NS: 
                               0                                               
                      DEBUG    Trade count type: <class 'int'>                 
                      DEBUG    WARNING: 2 entry signals but 0 trades generated!
                      WARNING  Strategy 'sma_crossover_test +                  
                               rsi_oversold_test' on 'TEST_ZERO_TRADES.NS'     
                               generated only 0 trades, below threshold of 1.  
                      INFO     find_optimal_strategies completed in 0.05s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=0                                    
                      INFO     Backtesting 2 rule combinations for             
                               TEST_ZERO_METRICS.NS                            
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      INFO     Rule 'sma_crossover' generated 2 signals on 100 
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 64 signals on 100 
                               data points                                     
                      INFO     find_optimal_strategies completed in 0.02s      
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      ERROR    Error processing rule combination               
                               ['sma_crossover_test', 'rsi_oversold_test']:    
                               Simulated processing error                      
[2025-07-22 22:57:26] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 1 symbols from universe                  
                      INFO     Refreshing 1 symbols                            
[2025-07-22 22:57:30] INFO     Successfully refreshed 1/1 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 1 symbols from universe                  
[4/4] Analysis complete. Results summary:
                      Top Strategies by Edge Score                       
┌──────────┬─────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack          │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼─────────────────────┼────────────┼───────┼────────┼────────┤
│ RELIANCE │ sma_10_20_crossover │      0.750 │ 65.0% │   1.20 │     15 │
└──────────┴─────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 1 valid strategies across 1 symbols.
[5/5] Saving results...
                      INFO     Saving 1 strategies to the database.            
                      INFO     Successfully saved 1 strategies                 
                      INFO     Saved 1 strategies to the database.             
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:30.097687 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_reports\signals_2025-07-22.md              
* Report generated: test_reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 3.42s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:30] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 1 symbols from universe                  
                      INFO     Refreshing 1 symbols                            
                      INFO     Successfully refreshed 1/1 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 1 symbols from universe                  
[4/4] Analysis complete. Results summary:
                      Top Strategies by Edge Score                       
┌──────────┬─────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack          │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼─────────────────────┼────────────┼───────┼────────┼────────┤
│ RELIANCE │ sma_10_20_crossover │      0.750 │ 65.0% │   1.20 │     15 │
└──────────┴─────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 1 valid strategies across 1 symbols.
[5/5] Saving results...
                      INFO     Saving 1 strategies to the database.            
                      ERROR    Batch save failed: disk I/O error               
⚠️  Failed to save results to database.
                      WARNING  Persistence failed but continuing execution.    
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:30.256374 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_reports\signals_2025-07-22.md              
* Report generated: test_reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 0.08s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:30] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      INFO     full_backtest completed in 0.00s                
Error: Backtest failed!
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:30] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Refreshing 1 symbols                            
                      INFO     Successfully refreshed 1/1 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     full_backtest completed in 0.04s                
Error: Universe file not found
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:30] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      INFO     full_backtest completed in 0.00s                
An unexpected error occurred: Generic backtest error
┌───────────────────── Traceback (most recent call last) ─────────────────────┐
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:314 in run                  │
│                                                                             │
│   311 │   │   │                                                             │
│   312 │   │   │   console.print("[3/4] Analyzing strategies for each ticker │
│   313 │   │   │   symbols = data.load_universe(app_config.universe_path)    │
│ > 314 │   │   │   all_results = _run_backtests(app_config, rules_config, sy │
│   315 │   │   │                                                             │
│   316 │   │   │   console.print("[4/4] Analysis complete. Results summary:" │
│   317                                                                       │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1139 in __call__                                                            │
│                                                                             │
│   1136 │   │   # in the signature                                           │
│   1137 │   │   self._mock_check_sig(*args, **kwargs)                        │
│   1138 │   │   self._increment_mock_call(*args, **kwargs)                   │
│ > 1139 │   │   return self._mock_call(*args, **kwargs)                      │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1143 in _mock_call                                                          │
│                                                                             │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│ > 1143 │   │   return self._execute_mock_call(*args, **kwargs)              │
│   1144 │                                                                    │
│   1145 │   def _increment_mock_call(self, /, *args, **kwargs):              │
│   1146 │   │   self.called = True                                           │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1198 in _execute_mock_call                                                  │
│                                                                             │
│   1195 │   │   effect = self.side_effect                                    │
│   1196 │   │   if effect is not None:                                       │
│   1197 │   │   │   if _is_exception(effect):                                │
│ > 1198 │   │   │   │   raise effect                                         │
│   1199 │   │   │   elif not _callable(effect):                              │
│   1200 │   │   │   │   result = next(effect)                                │
│   1201 │   │   │   │   if _is_exception(result):                            │
└─────────────────────────────────────────────────────────────────────────────┘
Exception: Generic backtest error
[2025-07-22 22:57:31] INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:31] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 1 symbols from universe                  
                      INFO     Refreshing 1 symbols                            
                      INFO     Successfully refreshed 1/1 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 1 symbols from universe                  
[4/4] Analysis complete. Results summary:
                  Top Strategies by Edge Score                  
┌──────────┬────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼────────────┼────────────┼───────┼────────┼────────┤
│ RELIANCE │ sma_test   │      0.100 │ 10.0% │   0.10 │      1 │
└──────────┴────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 1 valid strategies across 1 symbols.
[5/5] Saving results...
                      INFO     Saved 1 strategies to the database.             
[5/5] Generating report...
(WARN) Report generation failed
                      INFO     full_backtest completed in 0.06s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmp98erh2it\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmp98erh2it\tes
                               t.db                                            
[2025-07-22 22:57:31] INFO     === KISS Signal CLI Run Started ===             
Analyzing historical rule performance...
✅ Rule performance analysis saved to: 
C:\Users\user\AppData\Local\Temp\tmp98erh2it\analysis.md
[2025-07-22 22:57:31] INFO     === KISS Signal CLI Run Started ===             
Analyzing historical rule performance...
Error: Database file not found at 
C:\Users\user\AppData\Local\Temp\tmpw3bnklrr\nonexistent.db
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpwm7_2b4i\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpwm7_2b4i\tes
                               t.db                                            
[2025-07-22 22:57:31] INFO     === KISS Signal CLI Run Started ===             
Analyzing historical rule performance...
No historical strategies found in the database to analyze.
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpzgv82ynq\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpzgv82ynq\tes
                               t.db                                            
[2025-07-22 22:57:31] INFO     === KISS Signal CLI Run Started ===             
Analyzing historical rule performance...
An unexpected error occurred during analysis: Analysis boom!
┌───────────────────── Traceback (most recent call last) ─────────────────────┐
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:371 in analyze_rules        │
│                                                                             │
│   368 │   │   raise typer.Exit(1)                                           │
│   369 │                                                                     │
│   370 │   try:                                                              │
│ > 371 │   │   rule_performance = reporter.analyze_rule_performance(db_path) │
│   372 │   │   if not rule_performance:                                      │
│   373 │   │   │   console.print("[yellow]No historical strategies found in  │
│   374 │   │   │   return                                                    │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1139 in __call__                                                            │
│                                                                             │
│   1136 │   │   # in the signature                                           │
│   1137 │   │   self._mock_check_sig(*args, **kwargs)                        │
│   1138 │   │   self._increment_mock_call(*args, **kwargs)                   │
│ > 1139 │   │   return self._mock_call(*args, **kwargs)                      │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1143 in _mock_call                                                          │
│                                                                             │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│ > 1143 │   │   return self._execute_mock_call(*args, **kwargs)              │
│   1144 │                                                                    │
│   1145 │   def _increment_mock_call(self, /, *args, **kwargs):              │
│   1146 │   │   self.called = True                                           │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1198 in _execute_mock_call                                                  │
│                                                                             │
│   1195 │   │   effect = self.side_effect                                    │
│   1196 │   │   if effect is not None:                                       │
│   1197 │   │   │   if _is_exception(effect):                                │
│ > 1198 │   │   │   │   raise effect                                         │
│   1199 │   │   │   elif not _callable(effect):                              │
│   1200 │   │   │   │   result = next(effect)                                │
│   1201 │   │   │   │   if _is_exception(result):                            │
└─────────────────────────────────────────────────────────────────────────────┘
Exception: Analysis boom!
[2025-07-22 22:57:31] INFO     === KISS Signal CLI Run Started ===             
Analyzing historical rule performance...
An unexpected error occurred during analysis: Analysis boom!
┌───────────────────── Traceback (most recent call last) ─────────────────────┐
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:371 in analyze_rules        │
│                                                                             │
│   368 │   │   raise typer.Exit(1)                                           │
│   369 │                                                                     │
│   370 │   try:                                                              │
│ > 371 │   │   rule_performance = reporter.analyze_rule_performance(db_path) │
│   372 │   │   if not rule_performance:                                      │
│   373 │   │   │   console.print("[yellow]No historical strategies found in  │
│   374 │   │   │   return                                                    │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1139 in __call__                                                            │
│                                                                             │
│   1136 │   │   # in the signature                                           │
│   1137 │   │   self._mock_check_sig(*args, **kwargs)                        │
│   1138 │   │   self._increment_mock_call(*args, **kwargs)                   │
│ > 1139 │   │   return self._mock_call(*args, **kwargs)                      │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1143 in _mock_call                                                          │
│                                                                             │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│ > 1143 │   │   return self._execute_mock_call(*args, **kwargs)              │
│   1144 │                                                                    │
│   1145 │   def _increment_mock_call(self, /, *args, **kwargs):              │
│   1146 │   │   self.called = True                                           │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1198 in _execute_mock_call                                                  │
│                                                                             │
│   1195 │   │   effect = self.side_effect                                    │
│   1196 │   │   if effect is not None:                                       │
│   1197 │   │   │   if _is_exception(effect):                                │
│ > 1198 │   │   │   │   raise effect                                         │
│   1199 │   │   │   elif not _callable(effect):                              │
│   1200 │   │   │   │   result = next(effect)                                │
│   1201 │   │   │   │   if _is_exception(result):                            │
│                                                                             │
│ D:\Code\stock_rule_based\src\kiss_signal\cli.py:371 in analyze_rules        │
│                                                                             │
│   368 │   │   raise typer.Exit(1)                                           │
│   369 │                                                                     │
│   370 │   try:                                                              │
│ > 371 │   │   rule_performance = reporter.analyze_rule_performance(db_path) │
│   372 │   │   if not rule_performance:                                      │
│   373 │   │   │   console.print("[yellow]No historical strategies found in  │
│   374 │   │   │   return                                                    │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1139 in __call__                                                            │
│                                                                             │
│   1136 │   │   # in the signature                                           │
│   1137 │   │   self._mock_check_sig(*args, **kwargs)                        │
│   1138 │   │   self._increment_mock_call(*args, **kwargs)                   │
│ > 1139 │   │   return self._mock_call(*args, **kwargs)                      │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1143 in _mock_call                                                          │
│                                                                             │
│   1140 │                                                                    │
│   1141 │                                                                    │
│   1142 │   def _mock_call(self, /, *args, **kwargs):                        │
│ > 1143 │   │   return self._execute_mock_call(*args, **kwargs)              │
│   1144 │                                                                    │
│   1145 │   def _increment_mock_call(self, /, *args, **kwargs):              │
│   1146 │   │   self.called = True                                           │
│                                                                             │
│ C:\Users\user\AppData\Local\Programs\Python\Python312\Lib\unittest\mock.py: │
│ 1198 in _execute_mock_call                                                  │
│                                                                             │
│   1195 │   │   effect = self.side_effect                                    │
│   1196 │   │   if effect is not None:                                       │
│   1197 │   │   │   if _is_exception(effect):                                │
│ > 1198 │   │   │   │   raise effect                                         │
│   1199 │   │   │   elif not _callable(effect):                              │
│   1200 │   │   │   │   result = next(effect)                                │
│   1201 │   │   │   │   if _is_exception(result):                            │
└─────────────────────────────────────────────────────────────────────────────┘
Exception: Analysis boom!
[2025-07-22 22:57:32] INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpcrdspzoo\tes
                               t.db                                            
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpcrdspzoo\tes
                               t.db                                            
[2025-07-22 22:57:32] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:33] INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpg2uhcqk1\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpg2uhcqk1\tes
                               t.db                                            
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: my_strategy_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
Error: Database file not found at 
C:\Users\user\AppData\Local\Temp\tmpf92udp4q\nonexistent.db
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
No historical strategies found to analyze.
                      INFO     Log file saved to analyze_strategies_log.txt    
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmp4dknmsr8\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmp4dknmsr8\tes
                               t.db                                            
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
An unexpected error occurred during analysis: Analysis boom!
                      INFO     Log file saved to analyze_strategies_log.txt    
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmp9ttzpiy3\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmp9ttzpiy3\tes
                               t.db                                            
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmphp4wb2vx\tes
                               t.db                                            
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmphp4wb2vx\tes
                               t.db                                            
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      ERROR    Failed to fetch open positions: no such table:  
                               positions                                       
                      ERROR    Database error fetching strategies: no such     
                               table: strategies                               
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_reports\signals_2025-07-22.md              
* Report generated: test_reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 0.04s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:33.520644 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_reports\signals_2025-07-22.md              
* Report generated: test_reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 0.01s                

Performance Summary:
Total Duration: 12.34s
Slowest Function: test_func (5.67s)
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
                      INFO     Freeze mode active: 2025-01-01                  
[2/4] Skipping data refresh (freeze mode).
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:33.592786 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_reports\signals_2025-01-01.md              
* Report generated: test_reports\signals_2025-01-01.md
                      INFO     full_backtest completed in 0.01s                

Performance Summary:
Total Duration: 0.03s
Slowest Function: find_optimal_strategies
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
                      Top Strategies by Edge Score                       
┌──────────┬─────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack          │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼─────────────────────┼────────────┼───────┼────────┼────────┤
│ RELIANCE │ sma_10_20_crossover │      0.500 │ 50.0% │   0.50 │     12 │
└──────────┴─────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 1 valid strategies across 1 symbols.
[5/5] Saving results...
                      INFO     Saving 1 strategies to the database.            
                      ERROR    Batch save failed: 'avg_return'                 
⚠️  Failed to save results to database.
                      WARNING  Persistence failed but continuing execution.    
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:33.650905 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_reports\signals_2025-07-22.md              
* Report generated: test_reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 0.02s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
Error: Invalid isoformat string for freeze_date: 'invalid-date'
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: [Errno 2] No such file or directory: 
'nonexistent.yaml'
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: Rules file not found: nonexistent_rules.yaml
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test_kiss_signal.db   
                      INFO     Successfully created database at                
                               data\test_kiss_signal.db                        
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
                      WARNING  Insufficient data for RELIANCE, skipping        
                      WARNING  Insufficient data for INFY, skipping            
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:33.763121 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_reports\signals_2025-07-22.md              
* Report generated: test_reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 0.02s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpxq3zzv3c\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpxq3zzv3c\dat
                               a\test.db                                       
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
✅ Operation complete!
Cleared: 5 strategies
Preserved: 10 historical strategies
New strategies found: 2
                      INFO     Log file saved to clear_and_recalculate_log.txt 
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpw2acjepv\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpw2acjepv\dat
                               a\test.db                                       
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
✅ Operation complete!
Cleared: 0 strategies
Preserved: 0 historical strategies
New strategies found: 1
                      INFO     Log file saved to clear_and_recalculate_log.txt 
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmp35109xbn\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmp35109xbn\dat
                               a\test.db                                       
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
✅ Operation complete!
Cleared: 2 strategies
Preserved: 5 historical strategies
New strategies found: 0
                      INFO     Log file saved to clear_and_recalculate_log.txt 
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmp1iyxp03c\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmp1iyxp03c\dat
                               a\test.db                                       
[2025-07-22 22:57:33] INFO     === KISS Signal CLI Run Started ===             
An unexpected error occurred: Database connection failed
                      INFO     Log file saved to clear_and_recalculate_log.txt 
[2025-07-22 22:57:34] INFO     === KISS Signal CLI Run Started ===             
Error: Database file not found at data\nonexistent.db
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpnkljmh3l\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpnkljmh3l\dat
                               a\test.db                                       
[2025-07-22 22:57:34] INFO     === KISS Signal CLI Run Started ===             
An unexpected error occurred: Test error
                      INFO     Log file saved to clear_and_recalculate_log.txt 
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmprmfjzqo_\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmprmfjzqo_\dat
                               a\test.db                                       
[2025-07-22 22:57:34] INFO     === KISS Signal CLI Run Started ===             
✅ Operation complete!
Cleared: 5 strategies
Preserved: 10 historical strategies
New strategies found: 8
                      INFO     Log file saved to clear_and_recalculate_log.txt 
[2025-07-22 22:57:34] INFO     === KISS Signal CLI Run Started ===             
Error: Database file not found at data\nonexistent.db
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpr41skdg5\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpr41skdg5\dat
                               a\test.db                                       
[2025-07-22 22:57:34] INFO     === KISS Signal CLI Run Started ===             
✅ Operation complete!
Cleared: 0 strategies
Preserved: 0 historical strategies
New strategies found: 0
                      INFO     Log file saved to clear_and_recalculate_log.txt 
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      ERROR    Error analyzing TEST: 'dict' object has no      
                               attribute 'cache_dir'                           
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      ERROR    Error analyzing TEST: 'dict' object has no      
                               attribute 'cache_dir'                           
[2025-07-22 22:57:34] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test.db               
                      DEBUG    Enabled WAL mode for concurrent access          
                      DEBUG    Created strategies table                        
                      DEBUG    Created positions table                         
                      DEBUG    Created index on strategies table               
                      DEBUG    Created index on positions table                
                      DEBUG    Set database version to 2                       
                      INFO     Successfully created database at data\test.db   
[1/4] Configuration loaded.
                      INFO     Refreshing market data                          
[2/4] Refreshing market data...
                      INFO     Loaded 2 symbols from universe                  
                      INFO     Refreshing 2 symbols                            
                      DEBUG    Fetching RELIANCE (1/2)                         
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['RELIANCE.NS', 1, 0])                      
                      DEBUG      Entering history()                            
                      DEBUG    RELIANCE.NS: Yahoo GET parameters: {'period1':  
                               '2022-07-23 00:00:00+05:30', 'period2':         
                               '2025-07-22 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG       Entering get()                               
                      DEBUG        Entering _make_request()                    
                      DEBUG    url=https://query2.finance.yahoo.com/v8/finance/
                               chart/RELIANCE.NS                               
                      DEBUG    params=frozendict.frozendict({'period1':        
                               1658514600, 'period2': 1753122600, 'interval':  
                               '1d', 'includePrePost': False, 'events':        
                               'div,splits,capitalGains'})                     
                      DEBUG         Entering _get_cookie_and_crumb()           
                      DEBUG    cookie_mode = 'basic'                           
                      DEBUG          Entering _get_cookie_and_crumb_basic()    
                      DEBUG           Entering _get_cookie_basic()             
                      DEBUG    reusing cookie                                  
                      DEBUG           Exiting _get_cookie_basic()              
                      DEBUG           Entering _get_crumb_basic()              
                      DEBUG    reusing crumb                                   
                      DEBUG           Exiting _get_crumb_basic()               
                      DEBUG          Exiting _get_cookie_and_crumb_basic()     
                      DEBUG         Exiting _get_cookie_and_crumb()            
                      DEBUG    response code=200                               
                      DEBUG        Exiting _make_request()                     
                      DEBUG       Exiting get()                                
                      DEBUG    RELIANCE.NS: yfinance received OHLC data:       
                               2022-07-25 03:45:00 -> 2025-07-21 03:45:00      
                      DEBUG    RELIANCE.NS: OHLC after cleaning: 2022-07-25    
                               09:15:00+05:30 -> 2025-07-21 09:15:00+05:30     
                      DEBUG    RELIANCE.NS: OHLC after combining events:       
                               2022-07-25 00:00:00+05:30 -> 2025-07-21         
                               00:00:00+05:30                                  
                      DEBUG    RELIANCE.NS: yfinance returning OHLC: 2022-07-25
                               00:00:00+05:30 -> 2025-07-21 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
[2025-07-22 22:57:35] DEBUG    Fetching INFY (2/2)                             
                      DEBUG    Entering download()                             
                      DEBUG    Disabling multithreading because DEBUG logging  
                               enabled                                         
                      DEBUG     Entering history()                             
                      DEBUG    ('SELECT "t1"."key", "t1"."value" FROM "_tz_kv" 
                               AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET   
                               ?', ['INFY.NS', 1, 0])                          
                      DEBUG      Entering history()                            
                      DEBUG    INFY.NS: Yahoo GET parameters: {'period1':      
                               '2022-07-23 00:00:00+05:30', 'period2':         
                               '2025-07-22 00:00:00+05:30', 'interval': '1d',  
                               'includePrePost': False, 'events':              
                               'div,splits,capitalGains'}                      
                      DEBUG       Entering get()                               
                      DEBUG        Entering _make_request()                    
                      DEBUG    url=https://query2.finance.yahoo.com/v8/finance/
                               chart/INFY.NS                                   
                      DEBUG    params=frozendict.frozendict({'period1':        
                               1658514600, 'period2': 1753122600, 'interval':  
                               '1d', 'includePrePost': False, 'events':        
                               'div,splits,capitalGains'})                     
                      DEBUG         Entering _get_cookie_and_crumb()           
                      DEBUG    cookie_mode = 'basic'                           
                      DEBUG          Entering _get_cookie_and_crumb_basic()    
                      DEBUG           Entering _get_cookie_basic()             
                      DEBUG    reusing cookie                                  
                      DEBUG           Exiting _get_cookie_basic()              
                      DEBUG           Entering _get_crumb_basic()              
                      DEBUG    reusing crumb                                   
                      DEBUG           Exiting _get_crumb_basic()               
                      DEBUG          Exiting _get_cookie_and_crumb_basic()     
                      DEBUG         Exiting _get_cookie_and_crumb()            
                      DEBUG    response code=200                               
                      DEBUG        Exiting _make_request()                     
                      DEBUG       Exiting get()                                
                      DEBUG    INFY.NS: yfinance received OHLC data: 2022-07-25
                               03:45:00 -> 2025-07-21 03:45:00                 
                      DEBUG    INFY.NS: OHLC after cleaning: 2022-07-25        
                               09:15:00+05:30 -> 2025-07-21 09:15:00+05:30     
                      DEBUG    INFY.NS: OHLC after combining events: 2022-07-25
                               00:00:00+05:30 -> 2025-07-21 00:00:00+05:30     
                      DEBUG    INFY.NS: yfinance returning OHLC: 2022-07-25    
                               00:00:00+05:30 -> 2025-07-21 00:00:00+05:30     
                      DEBUG      Exiting history()                             
                      DEBUG     Exiting history()                              
                      DEBUG    Exiting download()                              
                      INFO     Successfully refreshed 2/2 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 2 symbols from universe                  
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:35.269060 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated: reports\signals_2025-07-22.md 
* Report generated: reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 1.03s                

Performance Summary:
Total Duration: 1.50s
Slowest Function: test_function
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:35] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at data\test.db               
                      INFO     Successfully created database at data\test.db   
[1/4] Configuration loaded.
[2/4] Refreshing market data...
                      INFO     Loaded 2 symbols from universe                  
                      INFO     Refreshing 2 symbols                            
                      INFO     Successfully refreshed 2/2 symbols              
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 2 symbols from universe                  
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:35.938106 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      ERROR    Failed to generate report: Permission denied    
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\report
                               er.py", line 314, in generate_daily_report      
                                   report_file.write_text(report_content,      
                               encoding='utf-8')                               
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                               OSError: Permission denied                      
(WARN) Report generation failed
                      INFO     full_backtest completed in 0.64s                
                      ERROR    Critical error: Could not save log file to      
                               run_log.txt. Reason: Permission denied          
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\cli.py
                               ", line 339, in run                             
                                   log_path.write_text(console.export_text(clea
                               r=False), encoding="utf-8")                     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\report
                               er.py", line 314, in generate_daily_report      
                                   report_file.write_text(report_content,      
                               encoding='utf-8')                               
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                               OSError: Permission denied                      
Critical error: Could not save log file to run_log.txt. Reason: Permission 
denied
                      INFO     Database connection closed.                     
[2025-07-22 22:57:35] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
[2025-07-22 22:57:36] ERROR    Failed to read strategies from database: no such
                               table: strategies                               
No historical strategies found to analyze.
                      ERROR    Critical error: Could not save log file to      
                               analyze_strategies_log.txt. Reason: Disk full   
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\cli.py
                               ", line 442, in analyze_strategies              
                                   log_path.write_text(console.export_text(clea
                               r=False), encoding="utf-8")                     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                               OSError: Disk full                              
Critical error: Could not save log file to analyze_strategies_log.txt. Reason: 
Disk full
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Error loading configuration: [Errno 2] No such file or directory: 
'nonexistent_config.yaml'
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmpos9rr2j1\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmpos9rr2j1\dat
                               a\test.db                                       
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
An unexpected error occurred: Database corruption
                      INFO     Log file saved to clear_and_recalculate_log.txt 
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\tmp5nyw7jr0\dat
                               a\test.db                                       
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\tmp5nyw7jr0\dat
                               a\test.db                                       
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Current database contains 0 strategies
Will preserve 0 historical strategies
Will clear 0 current strategy records
✅ Operation complete!
Cleared: 0 strategies
Preserved: 0 historical strategies
New strategies found: 0
                      ERROR    Critical error: Could not save log file to      
                               clear_and_recalculate_log.txt. Reason: No space 
                               left                                            
                               Traceback (most recent call last):              
                                 File                                          
                               "D:\Code\stock_rule_based\src\kiss_signal\cli.py
                               ", line 519, in clear_and_recalculate           
                                   log_path.write_text(console.export_text(clea
                               r=False), encoding="utf-8")                     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1139, in     
                               __call__                                        
                                   return self._mock_call(*args, **kwargs)     
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^     
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1143, in     
                               _mock_call                                      
                                   return self._execute_mock_call(*args,       
                               **kwargs)                                       
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               ^^^                                             
                                 File                                          
                               "C:\Users\user\AppData\Local\Programs\Python\Pyt
                               hon312\Lib\unittest\mock.py", line 1198, in     
                               _execute_mock_call                              
                                   raise effect                                
                               OSError: No space left                          
Critical error: Could not save log file to clear_and_recalculate_log.txt. 
Reason: No space left
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      ERROR    Failed to fetch open positions: no such table:  
                               positions                                       
                      ERROR    Database error fetching strategies: no such     
                               table: strategies                               
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_data\reports\signals_2025-07-22.md         
* Report generated: test_data\reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 0.01s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
No valid strategies found. Check data quality and rule configurations.
[5/5] Generating report...
                      ERROR    Failed to fetch open positions: no such table:  
                               positions                                       
                      ERROR    Database error fetching strategies: no such     
                               table: strategies                               
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               test_data\reports\signals_2025-07-22.md         
* Report generated: test_data\reports\signals_2025-07-22.md
                      INFO     full_backtest completed in 0.01s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Analyzing aggregated strategy performance...
                      INFO     Analyzed 1 unique strategy+config combinations  
                               from 4 individual records                       
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
[1/4] Configuration loaded.
[2/4] Refreshing market data...
[3/4] Analyzing strategies for each ticker...
[4/4] Analysis complete. Results summary:
                  Top Strategies by Edge Score                  
┌──────────┬────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼────────────┼────────────┼───────┼────────┼────────┤
│ INFY     │ test_rule  │      0.600 │ 65.0% │   1.20 │     15 │
│ RELIANCE │ test_rule  │      0.300 │ 50.0% │   0.80 │      5 │
└──────────┴────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 2 valid strategies across 2 symbols.
[5/5] Saving results...
                      INFO     Saved 2 strategies to the database.             
[5/5] Generating report...
* Report generated: <MagicMock name='generate_daily_report()' 
id='2272698881696'>
                      INFO     full_backtest completed in 0.01s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
[2025-07-22 22:57:36] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
                      INFO     Log file saved to analyze_strategies_log.txt    
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      ERROR    Error applying context filter 'error_filter' to 
                               TEST: Data error                                
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Combined context filters for TEST: 5/5 days pass
                               (100.0%)                                        
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Combined context filters for TEST: 3/5 days pass
                               (60.0%)                                         
                      INFO     Downloading market index data for ^NSEI         
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      ERROR    Error applying context filter 'unknown_filter'  
                               to TEST: Unknown context filter type:           
                               unknown_type                                    
                      INFO     Downloading fresh data for RELIANCE             
                      WARNING  Limited data for RELIANCE: only 3 rows          
                      INFO     Freeze mode active, skipping cache refresh      
                      INFO     Refreshing 1 symbols                            
                      INFO     Successfully refreshed 1/1 symbols              
                      INFO     Refreshing 1 symbols                            
                      ERROR    Failed to fetch data for RELIANCE.NS: 'NoneType'
                               object has no attribute 'empty'                 
[2025-07-22 22:57:37] ERROR    Failed to fetch data for RELIANCE.NS: 'NoneType'
                               object has no attribute 'empty'                 
[2025-07-22 22:57:39] ERROR    Failed to fetch data for RELIANCE.NS: 'NoneType'
                               object has no attribute 'empty'                 
                      WARNING  Failed to fetch data for RELIANCE after 3       
                               attempts                                        
                      INFO     Successfully refreshed 0/1 symbols              
                      INFO     Refreshing 1 symbols                            
                      WARNING  Negative prices detected for RELIANCE           
                      WARNING  Data validation failed for RELIANCE             
                      INFO     Successfully refreshed 0/1 symbols              
                      INFO     Downloading fresh data for TEST                 
[2025-07-22 22:57:45] WARNING  No data returned for TEST.NS after 3 attempts   
                      ERROR    Missing required columns for TEST.NS:           
                               Index(['index', 'open'], dtype='object')        
                      ERROR    Failed to fetch data for TEST.NS: API Error     
[2025-07-22 22:57:47] WARNING  Failed to fetch data for TEST after 3 attempts  
                      WARNING  Data validation failed for TEST                 
                      WARNING  Failed to save cache for TEST                   
                      INFO     Refreshing 2 symbols                            
[2025-07-22 22:57:48] INFO     Successfully refreshed 2/2 symbols              
                      INFO     Loaded 2 symbols from universe                  
                      ERROR    Universe file not found: nonexistent.csv        
                      WARNING  Negative prices detected for RELIANCE           
                      WARNING  High zero-volume days for RELIANCE              
                      WARNING  Empty data for TEST                             
                      WARNING  Large data gap detected for TEST: 9.0 days      
                      ERROR    Failed to save cache for TEST: Disk full        
                      WARNING  Limited data for RELIANCE: only 5 rows          
                      WARNING  Limited data for RELIANCE: only 3 rows          
                      WARNING  Limited data for TEST: only 10 rows             
                      WARNING  Limited data for RELIANCE: only 3 rows          
                      WARNING  OSError checking cache status for TEST.NS.csv,  
                               assuming refresh needed.                        
                      INFO     Downloading fresh data for BPCL                 
                      WARNING  Limited data for BPCL: only 2 rows              
                      INFO     Downloading fresh data for ^NSEI                
                      DEBUG    Position tracking data for TESTSTOCK: 3 rows    
                               from 2023-01-02 to 2023-01-04                   
                      WARNING  Limited data for TESTSTOCK: only 5 rows         
                      WARNING  Limited data for TESTSTOCK: only 4 rows         
                      WARNING  Limited data for TESTSTOCK: only 3 rows         
                      DEBUG    Position tracking data for TESTSTOCK: 3 rows    
                               from 2023-01-02 to 2023-01-04                   
                      WARNING  Limited data for TESTSTOCK: only 5 rows         
                      WARNING  Limited data for TESTSTOCK: only 3 rows         
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=5                                    
                      INFO     Using data up to freeze date: 2023-03-31        
                      INFO     Backtesting 2 rule combinations for TEST        
                      INFO     Rule 'sma_crossover' generated 0 signals on 90  
                               data points                                     
                      WARNING  Strategy 'sma_10_20_crossover' on 'TEST'        
                               generated only 0 trades, below threshold of 5.  
                      INFO     Rule 'sma_crossover' generated 0 signals on 90  
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 89 signals on 90  
                               data points                                     
                      WARNING  Strategy 'sma_10_20_crossover + rsi_oversold_30'
                               on 'TEST' generated only 0 trades, below        
                               threshold of 5.                                 
                      INFO     find_optimal_strategies completed in 0.05s      
                      INFO     Loaded 2 symbols from universe                  
[2025-07-22 22:57:48] INFO     === KISS Signal CLI Run Started ===             
┌───────────────────────────────── QuickEdge ─────────────────────────────────┐
│ KISS Signal CLI                                                             │
│ Keep-It-Simple Data Foundation                                              │
└─────────────────────────────────────────────────────────────────────────────┘
                      INFO     Creating database at                            
                               C:\Users\user\AppData\Local\Temp\pytest-of-user\
                               pytest-813\test_end_to_end_cli_workflow0\integra
                               tion.db                                         
                      INFO     Successfully created database at                
                               C:\Users\user\AppData\Local\Temp\pytest-of-user\
                               pytest-813\test_end_to_end_cli_workflow0\integra
                               tion.db                                         
[1/4] Configuration loaded.
[2/4] Skipping data refresh (freeze mode).
[3/4] Analyzing strategies for each ticker...
                      INFO     Loaded 2 symbols from universe                  
                      INFO     Backtester initialized: hold_period=20,         
                               min_trades=10                                   
                      INFO     Using data up to freeze date: 2024-06-01        
                      INFO     Backtesting 2 rule combinations for RELIANCE    
                      INFO     Rule 'sma_crossover' generated 14 signals on 518
                               data points                                     
[2025-07-22 22:57:50] INFO     Rule 'sma_crossover' generated 14 signals on 518
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 381 signals on 518
                               data points                                     
                      INFO     find_optimal_strategies completed in 1.30s      
                      INFO     Using data up to freeze date: 2024-06-01        
                      INFO     Backtesting 2 rule combinations for INFY        
                      INFO     Rule 'sma_crossover' generated 14 signals on 518
                               data points                                     
                      INFO     Rule 'sma_crossover' generated 14 signals on 518
                               data points                                     
                      INFO     Rule 'rsi_oversold' generated 378 signals on 518
                               data points                                     
                      INFO     find_optimal_strategies completed in 0.07s      
[4/4] Analysis complete. Results summary:
                         Top Strategies by Edge Score                          
┌──────────┬───────────────────────────┬────────────┬───────┬────────┬────────┐
│ Symbol   │ Rule Stack                │ Edge Score │ Win % │ Sharpe │ Trades │
├──────────┼───────────────────────────┼────────────┼───────┼────────┼────────┤
│ INFY     │ sma_10_20_crossover       │     -0.584 │  7.1% │  -1.57 │     14 │
│ INFY     │ sma_10_20_crossover +     │     -0.584 │  7.1% │  -1.57 │     14 │
│          │ rsi_oversold_30           │            │       │        │        │
│ RELIANCE │ sma_10_20_crossover       │     -0.755 │  7.1% │  -2.00 │     14 │
│ RELIANCE │ sma_10_20_crossover +     │     -0.755 │  7.1% │  -2.00 │     14 │
│          │ rsi_oversold_30           │            │       │        │        │
└──────────┴───────────────────────────┴────────────┴───────┴────────┴────────┘

* Analysis complete. Found 4 valid strategies across 2 symbols.
[5/5] Saving results...
                      INFO     Saving 4 strategies to the database.            
                      INFO     Successfully saved 4 strategies                 
                      INFO     Saved 4 strategies to the database.             
[5/5] Generating report...
                      INFO     Fetched 0 open positions.                       
                      WARNING  No strategies found for timestamp               
                               2025-07-22T22:57:50.306001 above threshold 0.5  
                      INFO     No strategies found above threshold, no signals 
                               to generate                                     
                      INFO     Report generated:                               
                               C:\Users\user\AppData\Local\Temp\pytest-of-user\
                               pytest-813\test_end_to_end_cli_workflow0\reports
                               \signals_2024-06-01.md                          
* Report generated: 
C:\Users\user\AppData\Local\Temp\pytest-of-user\pytest-813\test_end_to_end_cli_
workflow0\reports\signals_2024-06-01.md
                      INFO     full_backtest completed in 1.43s                
                      INFO     Log file saved to run_log.txt                   
                      INFO     Database connection closed.                     
[2025-07-22 22:57:50] INFO     === KISS Signal CLI Run Started ===             
Analyzing per-stock strategy performance...
✅ Strategy performance analysis saved to: strategy_performance_report.csv
