============================= test session starts =============================
platform win32 -- Python 3.12.10, pytest-8.4.0, pluggy-1.6.0 -- D:\Code\stock_rule_based\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: D:\Code\stock_rule_based
configfile: pyproject.toml
plugins: cov-6.2.1
collecting ... collected 383 items

tests/test_adapters.py::TestFetchSymbolData::test_successful_fetch_basic PASSED [  0%]
tests/test_adapters.py::TestFetchSymbolData::test_successful_fetch_with_freeze_date PASSED [  0%]
tests/test_adapters.py::TestFetchSymbolData::test_multiindex_columns_handling PASSED [  0%]
tests/test_adapters.py::TestFetchSymbolData::test_tuple_columns_handling PASSED [  1%]
tests/test_adapters.py::TestFetchSymbolData::test_empty_dataframe_first_attempt_success_second PASSED [  1%]
tests/test_adapters.py::TestFetchSymbolData::test_empty_dataframe_all_attempts PASSED [  1%]
tests/test_adapters.py::TestFetchSymbolData::test_missing_required_columns PASSED [  1%]
tests/test_adapters.py::TestFetchSymbolData::test_yftzmissingerror_retry_then_success PASSED [  2%]
tests/test_adapters.py::TestFetchSymbolData::test_yftzmissingerror_all_attempts_fail PASSED [  2%]
tests/test_adapters.py::TestFetchSymbolData::test_timeout_error_retry_logic PASSED [  2%]
tests/test_adapters.py::TestFetchSymbolData::test_connection_error_retry_logic PASSED [  2%]
tests/test_adapters.py::TestFetchSymbolData::test_404_error_no_retry PASSED [  3%]
tests/test_adapters.py::TestFetchSymbolData::test_delisted_error_no_retry PASSED [  3%]
tests/test_adapters.py::TestFetchSymbolData::test_generic_error_no_retry PASSED [  3%]
tests/test_adapters.py::TestFetchSymbolData::test_data_type_conversion PASSED [  3%]
tests/test_adapters.py::TestFetchSymbolData::test_invalid_numeric_data_handling PASSED [  4%]
tests/test_adapters.py::TestFetchSymbolData::test_exponential_backoff_delays PASSED [  4%]
tests/test_adapters.py::TestFetchSymbolData::test_max_retries_reached PASSED [  4%]
tests/test_adapters.py::TestFetchSymbolData::test_different_years_parameter PASSED [  4%]
tests/test_adapters.py::TestFetchSymbolData::test_progress_parameter_disabled PASSED [  5%]
tests/test_adapters.py::TestFetchSymbolData::test_auto_adjust_parameter PASSED [  5%]
tests/test_adapters.py::TestFetchSymbolData::test_logger_import_and_usage PASSED [  5%]
tests/test_adapters.py::TestFetchSymbolData::test_time_import_and_usage PASSED [  6%]
tests/test_adapters.py::TestFetchSymbolData::test_column_standardization_edge_cases PASSED [  6%]
tests/test_adapters.py::TestFetchSymbolData::test_return_none_final_attempt PASSED [  6%]
tests/test_adapters.py::TestFetchSymbolData::test_function_signature_and_defaults PASSED [  6%]
tests/test_adapters.py::TestFetchSymbolData::test_coverage_all_error_classification_branches PASSED [  7%]
tests/test_adapters.py::TestFetchSymbolData::test_final_return_none_path PASSED [  7%]
tests/test_adapters.py::TestFetchSymbolData::test_unreachable_return_none_coverage PASSED [  7%]
tests/test_adapters.py::TestFetchSymbolData::test_theoretical_unreachable_path PASSED [  7%]
tests/test_adapters.py::TestFetchSymbolData::test_coverage_summary PASSED [  8%]
tests/test_backtester.py::TestBacktesterCore::test_init_default_parameters PASSED [  8%]
tests/test_backtester.py::TestBacktesterCore::test_init_custom_parameters PASSED [  8%]
tests/test_backtester.py::TestBacktesterCore::test_generate_signals_empty_type_field PASSED [  8%]
tests/test_backtester.py::TestBacktesterCore::test_generate_signals_various_rules[sma_crossover-params0] PASSED [  9%]
tests/test_backtester.py::TestBacktesterCore::test_generate_signals_various_rules[ema_crossover-params1] PASSED [  9%]
tests/test_backtester.py::TestBacktesterCore::test_generate_signals_various_rules[rsi_oversold-params2] PASSED [  9%]
tests/test_backtester.py::TestBacktesterCore::test_generate_signals_various_rules[volume_spike-params3] PASSED [  9%]
tests/test_backtester.py::TestBacktesterCore::test_calculate_edge_score_basic PASSED [ 10%]
tests/test_backtester.py::TestBacktesterCore::test_calculate_edge_score_with_weights PASSED [ 10%]
tests/test_backtester.py::TestBacktesterCore::test_backtest_strategy_end_to_end PASSED [ 10%]
tests/test_backtester.py::TestContextFilters::test_apply_context_filters_empty_list PASSED [ 10%]
tests/test_backtester.py::TestContextFilters::test_apply_context_filters_single_filter PASSED [ 11%]
tests/test_backtester.py::TestContextFilters::test_apply_context_filters_multiple_filters PASSED [ 11%]
tests/test_backtester.py::TestContextFilters::test_context_filter_initialization_fix PASSED [ 11%]
tests/test_backtester.py::TestContextFilters::test_context_filter_integration_with_backtest PASSED [ 12%]
tests/test_backtester.py::TestPandasDowncasting::test_no_future_warnings_on_import PASSED [ 12%]
tests/test_backtester.py::TestPandasDowncasting::test_apply_context_filters_no_warnings PASSED [ 12%]
tests/test_backtester.py::TestPandasDowncasting::test_generate_signals_no_warnings PASSED [ 12%]
tests/test_backtester.py::TestPandasDowncasting::test_portfolio_operations_no_warnings PASSED [ 13%]
tests/test_backtester.py::TestCompleteRuleStack::test_rule_stack_includes_entry_signals PASSED [ 13%]
tests/test_backtester.py::TestCompleteRuleStack::test_rule_stack_includes_all_entry_signals PASSED [ 13%]
tests/test_backtester.py::TestCompleteRuleStack::test_rule_stack_includes_context_filters PASSED [ 13%]
tests/test_backtester.py::TestCompleteRuleStack::test_rule_stack_includes_sell_conditions FAILED [ 14%]
tests/test_backtester.py::TestCompleteRuleStack::test_rule_stack_complete_configuration PASSED [ 14%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_basic_flow PASSED [ 14%]
tests/test_backtester.py::TestBacktesterIntegration::test_generate_exit_signals_multiple_stop_loss PASSED [ 14%]
tests/test_backtester.py::TestBacktesterIntegration::test_generate_exit_signals_multiple_take_profit PASSED [ 15%]
tests/test_backtester.py::TestBacktesterIntegration::test_generate_exit_signals_indicator_rule_exception PASSED [ 15%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_no_baseline_rule FAILED [ 15%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_infer_freq_none PASSED [ 15%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_intraday_data_ffill PASSED [ 16%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_successful_freq_inference PASSED [ 16%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_with_sell_conditions_logging FAILED [ 16%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_empty_signals ERROR [ 16%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_zero_trades_after_signals PASSED [ 17%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_total_trades_zero PASSED [ 17%]
tests/test_backtester.py::TestBacktesterIntegration::test_find_optimal_strategies_exception_in_processing FAILED [ 17%]
tests/test_backtester.py::TestBacktesterFixtures::test_sample_backtest_data_fixture PASSED [ 18%]
tests/test_backtester.py::TestBacktester::test_init_default_parameters PASSED [ 18%]
tests/test_backtester.py::TestBacktester::test_init_custom_parameters PASSED [ 18%]
tests/test_backtester.py::TestBacktester::test_generate_signals_empty_type_field PASSED [ 18%]
tests/test_backtester.py::TestBacktester::test_generate_signals_sma_crossover PASSED [ 19%]
tests/test_backtester.py::TestBacktester::test_generate_signals_invalid_rule PASSED [ 19%]
tests/test_backtester.py::TestBacktester::test_generate_signals_missing_parameters PASSED [ 19%]
tests/test_backtester.py::TestBacktester::test_find_optimal_strategies_no_trades PASSED [ 19%]
tests/test_backtester.py::TestBacktester::test_atr_exit_signal_generation PASSED [ 20%]
tests/test_backtester.py::TestBacktester::test_generate_exit_signals_with_atr PASSED [ 20%]
tests/test_backtester.py::TestBacktester::test_track_entry_prices PASSED [ 20%]
tests/test_cli.py::test_run_command_help PASSED                          [ 20%]
tests/test_cli.py::test_show_banner PASSED                               [ 21%]
tests/test_cli.py::test_create_progress_context PASSED                   [ 21%]
tests/test_cli.py::test_display_results_empty PASSED                     [ 21%]
tests/test_cli.py::test_run_command_basic PASSED                         [ 21%]
tests/test_cli.py::test_run_command_verbose PASSED                       [ 22%]
tests/test_cli.py::test_run_command_freeze_date PASSED                   [ 22%]
tests/test_cli.py::test_run_command_invalid_freeze_date PASSED           [ 22%]
tests/test_cli.py::test_run_command_no_config PASSED                     [ 22%]
tests/test_cli.py::test_run_command_missing_rules PASSED                 [ 23%]
tests/test_cli.py::test_run_command_insufficient_data_handling PASSED    [ 23%]
tests/test_cli.py::test_run_command_with_persistence PASSED              [ 23%]
tests/test_cli.py::test_run_command_persistence_failure_handling PASSED  [ 24%]
tests/test_cli.py::test_analyze_strategies_command_success PASSED        [ 24%]
tests/test_cli.py::test_analyze_strategies_command_custom_output PASSED  [ 24%]
tests/test_cli.py::test_analyze_strategies_command_no_database PASSED    [ 24%]
tests/test_cli.py::test_analyze_strategies_command_no_data PASSED        [ 25%]
tests/test_cli.py::test_analyze_strategies_command_error_handling PASSED [ 25%]
tests/test_cli.py::test_clear_and_recalculate_basic_flow PASSED          [ 25%]
tests/test_cli.py::test_clear_and_recalculate_clear_failure PASSED       [ 25%]
tests/test_cli.py::test_cli_with_min_trades_config PASSED                [ 26%]
tests/test_cli.py::test_min_trades_filtering_applied PASSED              [ 26%]
tests/test_cli.py::test_run_command_backtest_value_error PASSED          [ 26%]
tests/test_cli.py::test_run_command_file_not_found_in_backtest PASSED    [ 26%]
tests/test_cli.py::test_run_command_backtest_generic_exception_verbose PASSED [ 27%]
tests/test_cli.py::test_run_command_report_generation_fails_warning PASSED [ 27%]
tests/test_cli.py::test_cli_command_variations[command_args0-True] 